(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{112:function(e,a,t){"use strict";t.d(a,"a",(function(){return d})),t.d(a,"b",(function(){return g}));var r=t(0),n=t.n(r);function c(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function s(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?s(Object(t),!0).forEach((function(a){c(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function o(e,a){if(null==e)return{};var t,r,n=function(e,a){if(null==e)return{};var t,r,n={},c=Object.keys(e);for(r=0;r<c.length;r++)t=c[r],a.indexOf(t)>=0||(n[t]=e[t]);return n}(e,a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)t=c[r],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var i=n.a.createContext({}),l=function(e){var a=n.a.useContext(i),t=a;return e&&(t="function"==typeof e?e(a):p(p({},a),e)),t},d=function(e){var a=l(e.components);return n.a.createElement(i.Provider,{value:a},e.children)},u={inlineCode:"code",wrapper:function(e){var a=e.children;return n.a.createElement(n.a.Fragment,{},a)}},b=n.a.forwardRef((function(e,a){var t=e.components,r=e.mdxType,c=e.originalType,s=e.parentName,i=o(e,["components","mdxType","originalType","parentName"]),d=l(t),b=r,g=d["".concat(s,".").concat(b)]||d[b]||u[b]||c;return t?n.a.createElement(g,p(p({ref:a},i),{},{components:t})):n.a.createElement(g,p({ref:a},i))}));function g(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var c=t.length,s=new Array(c);s[0]=b;var p={};for(var o in a)hasOwnProperty.call(a,o)&&(p[o]=a[o]);p.originalType=e,p.mdxType="string"==typeof e?e:r,s[1]=p;for(var i=2;i<c;i++)s[i]=t[i];return n.a.createElement.apply(null,s)}return n.a.createElement.apply(null,t)}b.displayName="MDXCreateElement"},69:function(e,a,t){"use strict";t.r(a),t.d(a,"frontMatter",(function(){return p})),t.d(a,"metadata",(function(){return o})),t.d(a,"toc",(function(){return i})),t.d(a,"default",(function(){return d}));var r=t(3),n=t(8),c=(t(0),t(112)),s=["components"],p={title:"datapackage-php"},o={unversionedId:"data-package/php",id:"data-package/php",isDocsHomePage:!1,title:"datapackage-php",description:"Travis",source:"@site/docs/data-package/php.md",slug:"/data-package/php",permalink:"/docs/data-package/php",editUrl:"https://github.com/frictionlessdata/libraries/edit/master/docs/docs/data-package/php.md",version:"current",lastUpdatedBy:"roll",lastUpdatedAt:1624868223,formattedLastUpdatedAt:"6/28/2021",sidebar:"data-package",previous:{title:"datapackage-rb",permalink:"/docs/data-package/ruby"},next:{title:"datapackage-java",permalink:"/docs/data-package/java"}},i=[{value:"Features summary and Usage guide",id:"features-summary-and-usage-guide",children:[{value:"Installation",id:"installation",children:[]},{value:"Package",id:"package",children:[]},{value:"Resource",id:"resource",children:[]}]},{value:"Contributing",id:"contributing",children:[]}],l={toc:i};function d(e){var a=e.components,t=Object(n.a)(e,s);return Object(c.b)("wrapper",Object(r.a)({},l,t,{components:a,mdxType:"MDXLayout"}),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"https://travis-ci.org/frictionlessdata/datapackage-php"},Object(c.b)("img",{parentName:"a",src:"https://travis-ci.org/frictionlessdata/datapackage-php.svg?branch=master",alt:"Travis"})),"\n",Object(c.b)("a",{parentName:"p",href:"https://coveralls.io/r/frictionlessdata/datapackage-php?branch=master"},Object(c.b)("img",{parentName:"a",src:"http://img.shields.io/coveralls/frictionlessdata/datapackage-php.svg?branch=master",alt:"Coveralls"})),"\n",Object(c.b)("a",{parentName:"p",href:"https://scrutinizer-ci.com/g/frictionlessdata/datapackage-php/"},Object(c.b)("img",{parentName:"a",src:"https://scrutinizer-ci.com/g/frictionlessdata/datapackage-php/badges/quality-score.png?b=master",alt:"Scrutinizer-ci"})),"\n",Object(c.b)("a",{parentName:"p",href:"https://packagist.org/packages/frictionlessdata/datapackage"},Object(c.b)("img",{parentName:"a",src:"https://img.shields.io/packagist/dm/frictionlessdata/datapackage.svg",alt:"Packagist"})),"\n",Object(c.b)("a",{parentName:"p",href:"http://semver.org/"},Object(c.b)("img",{parentName:"a",src:"https://img.shields.io/badge/versions-SemVer-brightgreen.svg",alt:"SemVer"})),"\n",Object(c.b)("a",{parentName:"p",href:"https://gitter.im/frictionlessdata/chat"},Object(c.b)("img",{parentName:"a",src:"https://img.shields.io/gitter/room/frictionlessdata/chat.svg",alt:"Gitter"}))),Object(c.b)("p",null,"A utility library for working with ",Object(c.b)("a",{parentName:"p",href:"https://specs.frictionlessdata.io/data-package/"},"Data Package")," in PHP."),Object(c.b)("h2",{id:"features-summary-and-usage-guide"},"Features summary and Usage guide"),Object(c.b)("h3",{id:"installation"},"Installation"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-bash"},"composer require frictionlessdata/datapackage\n")),Object(c.b)("p",null,"Optionally, to create zip files you will need the PHP zip extension. On ubuntu it can be enabled with ",Object(c.b)("inlineCode",{parentName:"p"},"sudo apt-get install php-zip")),Object(c.b)("h3",{id:"package"},"Package"),Object(c.b)("p",null,"Load a data package conforming to the specs"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-php"},'use frictionlessdata\\datapackage\\Package;\n$package = Package::load("tests/fixtures/multi_data_datapackage.json");\n')),Object(c.b)("p",null,"Iterate over the resources and the data"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-php"},"foreach ($package as $resource) {\n    echo $resource->name();\n    foreach ($resource as $row) {\n        echo $row;\n    }\n}\n")),Object(c.b)("p",null,"Get all the data as an array (loads all the data into memory, not recommended for large data sets)"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-php"},"foreach ($package as $resource) {\n    var_dump($resource->read());\n}\n")),Object(c.b)("p",null,"All data and schemas are validated and throws exceptions in case of any problems."),Object(c.b)("p",null,"Validate the data explicitly and get a list of errors"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-php"},'Package::validate("tests/fixtures/simple_invalid_datapackage.json");  // array of validation errors\n')),Object(c.b)("p",null,"Load a zip file"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-php"},"$package = Package::load('http://datahub.io/opendatafortaxjustice/eucountrydatawb/r/datapackage_zip.zip');\n")),Object(c.b)("p",null,"Provide read options which are passed through to ",Object(c.b)("a",{parentName:"p",href:"https://github.com/frictionlessdata/tableschema-php"},"tableschema-php")," Table::read method"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-php"},"$package = Package::load('http://datahub.io/opendatafortaxjustice/eucountrydatawb/r/datapackage_zip.zip');\nforeach ($package as $resource) {\n    $resource->read([\"cast\" => false]);\n}\n")),Object(c.b)("p",null,"The package object has some useful methods to access and manipulate the resources"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-php"},'$package = Package::load("tests/fixtures/multi_data_datapackage.json");\n$package->resources();  // array of resource name => Resource object (see below for Resource class reference)\n$package->getResource("first-resource");  // Resource object matching the given name\n$package->removeResource("first-resource");\n// add a tabular resource\n$package->addResource("tabular-resource-name", [\n    "profile" => "tabular-data-resource",\n    "schema" => [\n        "fields" => [\n            ["name" => "id", "type" => "integer"],\n            ["name" => "name", "type" => "string"]\n        ]\n    ],\n    "path" => [\n        "tests/fixtures/simple_tabular_data.csv",\n    ]\n]);\n')),Object(c.b)("p",null,"Create a new package from scratch"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-php"},'$package = Package::create([\n    "name" => "datapackage-name",\n    "profile" => "tabular-data-package"\n]);\n// add a resource\n$package->addResource("resource-name", [\n    "profile" => "tabular-data-resource",\n    "schema" => [\n        "fields" => [\n            ["name" => "id", "type" => "integer"],\n            ["name" => "name", "type" => "string"]\n        ]\n    ],\n    "path" => "tests/fixtures/simple_tabular_data.csv"\n]);\n// save the package descriptor to a file\n$package->saveDescriptor("datapackage.json");\n')),Object(c.b)("p",null,"Save the entire datapackage including any local data to a zip file"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-php"},'$package->save("datapackage.zip");\n')),Object(c.b)("h3",{id:"resource"},"Resource"),Object(c.b)("p",null,"Resource objects can be accessed from a Package as described above"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-php"},'$resource = $package->getResource("resource-name")\n')),Object(c.b)("p",null,"or instantiated directly"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-php"},'use frictionlessdata\\datapackage\\Resource;\n$resource = Resource::create([\n    "name" => "my-resource",\n    "profile" => "tabular-data-resource",\n    "path" => "tests/fixtures/simple_tabular_data.csv",\n    "schema" => ["fields" => [["name" => "id", "type" => "integer"], ["name" => "name", "type" => "string"]]]\n]);\n')),Object(c.b)("p",null,"Iterating or reading over the resource produces combined rows from all the path or data elements"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-php"},"foreach ($resource as $row) {};  // iterating\n$resource->read();  // get all the data as an array\n")),Object(c.b)("h2",{id:"contributing"},"Contributing"),Object(c.b)("p",null,"Please read the contribution guidelines: ",Object(c.b)("a",{parentName:"p",href:"CONTRIBUTING.md"},"How to Contribute")))}d.isMDXComponent=!0}}]);