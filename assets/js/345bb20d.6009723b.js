(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{109:function(e,t,a){"use strict";a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return d}));var n=a(0),r=a.n(n);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var i=r.a.createContext({}),b=function(e){var t=r.a.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):c(c({},t),e)),a},m=function(e){var t=b(e.components);return r.a.createElement(i.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,l=e.originalType,o=e.parentName,i=s(e,["components","mdxType","originalType","parentName"]),m=b(a),u=n,d=m["".concat(o,".").concat(u)]||m[u]||p[u]||l;return a?r.a.createElement(d,c(c({ref:t},i),{},{components:a})):r.a.createElement(d,c({ref:t},i))}));function d(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=a.length,o=new Array(l);o[0]=u;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:n,o[1]=c;for(var i=2;i<l;i++)o[i]=a[i];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,a)}u.displayName="MDXCreateElement"},83:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return o})),a.d(t,"metadata",(function(){return c})),a.d(t,"toc",(function(){return s})),a.d(t,"default",(function(){return b}));var n=a(3),r=a(8),l=(a(0),a(109)),o={title:"tableschema-go"},c={unversionedId:"table-schema/go",id:"table-schema/go",isDocsHomePage:!1,title:"tableschema-go",description:"Build Status Coverage Status Go Report Card Gitter chat GoDoc Sourcegraph",source:"@site/docs/table-schema/go.md",slug:"/table-schema/go",permalink:"/docs/table-schema/go",editUrl:"https://github.com/frictionlessdata/libraries/edit/master/docs/docs/table-schema/go.md",version:"current",lastUpdatedBy:"roll",lastUpdatedAt:1622212129,formattedLastUpdatedAt:"5/28/2021",sidebar:"table-schema",previous:{title:"tableschema-java",permalink:"/docs/table-schema/java"},next:{title:"tableschema-rlang",permalink:"/docs/table-schema/rlang"}},s=[{value:"Installation",id:"installation",children:[{value:"Go version &gt;= 1.11",id:"go-version--111",children:[]},{value:"Go version &gt;= 1.8 &amp;&amp; &lt; 1.11",id:"go-version--18---111",children:[]}]},{value:"Tabular Data Load",id:"tabular-data-load",children:[]},{value:"Schema Inference and Configuration",id:"schema-inference-and-configuration",children:[]},{value:"Processing Tabular Data",id:"processing-tabular-data",children:[{value:"Field",id:"field",children:[]}]},{value:"Saving Tabular Data",id:"saving-tabular-data",children:[]}],i={toc:s};function b(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(l.b)("wrapper",Object(n.a)({},i,a,{components:t,mdxType:"MDXLayout"}),Object(l.b)("p",null,Object(l.b)("a",{parentName:"p",href:"https://travis-ci.org/frictionlessdata/tableschema-go"},Object(l.b)("img",{parentName:"a",src:"https://travis-ci.org/frictionlessdata/tableschema-go.svg?branch=master",alt:"Build Status"}))," ",Object(l.b)("a",{parentName:"p",href:"https://coveralls.io/github/frictionlessdata/tableschema-go?branch=master"},Object(l.b)("img",{parentName:"a",src:"https://coveralls.io/repos/github/frictionlessdata/tableschema-go/badge.svg?branch=master",alt:"Coverage Status"}))," ",Object(l.b)("a",{parentName:"p",href:"https://goreportcard.com/report/github.com/frictionlessdata/tableschema-go"},Object(l.b)("img",{parentName:"a",src:"https://goreportcard.com/badge/github.com/frictionlessdata/tableschema-go",alt:"Go Report Card"}))," ",Object(l.b)("a",{parentName:"p",href:"https://gitter.im/frictionlessdata/chat"},Object(l.b)("img",{parentName:"a",src:"https://badges.gitter.im/gitterHQ/gitter.png",alt:"Gitter chat"}))," ",Object(l.b)("a",{parentName:"p",href:"https://godoc.org/github.com/frictionlessdata/tableschema-go"},Object(l.b)("img",{parentName:"a",src:"https://godoc.org/github.com/frictionlessdata/tableschema-go?status.svg",alt:"GoDoc"}))," ",Object(l.b)("a",{parentName:"p",href:"https://sourcegraph.com/github.com/frictionlessdata/tableschema-go?badge"},Object(l.b)("img",{parentName:"a",src:"https://sourcegraph.com/github.com/frictionlessdata/tableschema-go/-/badge.svg",alt:"Sourcegraph"}))),Object(l.b)("p",null,Object(l.b)("a",{parentName:"p",href:"http://specs.frictionlessdata.io/table-schema/"},"Table schema")," tooling in Go."),Object(l.b)("h1",{id:"getting-started"},"Getting started"),Object(l.b)("h2",{id:"installation"},"Installation"),Object(l.b)("p",null,"This package uses ",Object(l.b)("a",{parentName:"p",href:"http://semver.org/"},"semantic versioning 2.0.0"),"."),Object(l.b)("h3",{id:"go-version--111"},"Go version >= 1.11"),Object(l.b)("p",null,"Please ",Object(l.b)("a",{parentName:"p",href:"https://blog.golang.org/using-go-modules"},"use go modules")," if you're using a version that supports it. To know which version of Go you're running, please run:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bassh"},"$ go version\ngo version go1.14 linux/amd64\n")),Object(l.b)("p",null,"If you're running go1.13+, you're good to go!"),Object(l.b)("p",null,"If you can not upgrade right now, you need to make sure your environment is using Go modules by setting the ",Object(l.b)("inlineCode",{parentName:"p"},"GO111MODULE")," environment variable. In bash, that could be done with the following command:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"$ export GO111MODULE=on\n")),Object(l.b)("h3",{id:"go-version--18---111"},"Go version >= 1.8 && < 1.11"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-sh"},"$ dep init\n$ dep ensure -add github.com/frictionlessdata/tableschema-go/csv@>=0.1\n")),Object(l.b)("h1",{id:"main-features"},"Main Features"),Object(l.b)("h2",{id:"tabular-data-load"},"Tabular Data Load"),Object(l.b)("p",null,"Have tabular data stored in local files? Remote files? Packages like the ",Object(l.b)("a",{parentName:"p",href:"https://godoc.org/github.com/frictionlessdata/tableschema-go/csv"},"csv")," are going to help on loading the data you need and making it ready for processing."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport "github.com/frictionlessdata/tableschema-go/csv"\n\nfunc main() {\n   tab, err := csv.NewTable(csv.Remote("myremotetable"), csv.LoadHeaders())\n   // Error handling.\n}\n')),Object(l.b)("p",null,"Supported physical representations:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",{parentName:"li",href:"https://godoc.org/github.com/frictionlessdata/tableschema-go/csv"},"CSV"))),Object(l.b)("p",null,"You would like to use tableschema-go but the physical representation you use is not listed here? No problem! Please create an issue before start contributing. We will be happy to help you along the way."),Object(l.b)("h2",{id:"schema-inference-and-configuration"},"Schema Inference and Configuration"),Object(l.b)("p",null,"Got that new dataset and wants to start getting your hands dirty ASAP? No problems, let the ",Object(l.b)("a",{parentName:"p",href:"https://github.com/frictionlessdata/tableschema-go/tree/master/schema"},"schema package")," try to infer\nthe data types based on the table data."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport (\n   "github.com/frictionlessdata/tableschema-go/csv"\n   "github.com/frictionlessdata/tableschema-go/schema"\n)\n\nfunc main() {\n   tab, _ := csv.NewTable(csv.Remote("myremotetable"), csv.LoadHeaders())\n   sch, _ := schema.Infer(tab)\n   fmt.Printf("%+v", sch)\n}\n')),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"Want to go faster? Please give ",Object(l.b)("a",{parentName:"p",href:"https://godoc.org/github.com/frictionlessdata/tableschema-go/schema#InferImplicitCasting"},"InferImplicitCasting")," a try and let us know how it goes.")),Object(l.b)("p",null,'There might be cases in which the inferred schema is not correct. One of those cases is when your data use strings like "N/A" to represent missing cells. That would usually make our inferential algorithm think the field is a string.'),Object(l.b)("p",null,"When that happens, you can manually perform those last minutes tweaks ",Object(l.b)("a",{parentName:"p",href:"https://godoc.org/github.com/frictionlessdata/tableschema-go/schema#Schema"},"Schema"),"."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-go"},'   sch.MissingValues = []string{"N/A"}\n   sch.GetField("ID").Type = schema.IntegerType\n')),Object(l.b)("p",null,"After all that, you could persist your schema to disk:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-go"},'sch.SaveToFile("users_schema.json")\n')),Object(l.b)("p",null,"And use the local schema later:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-go"},'sch, _ := sch.LoadFromFile("users_schema.json")\n')),Object(l.b)("p",null,"Finally, if your schema is saved remotely, you can also use it:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-go"},'sch, _ := schema.LoadRemote("http://myfoobar/users/schema.json")\n')),Object(l.b)("h2",{id:"processing-tabular-data"},"Processing Tabular Data"),Object(l.b)("p",null,"Once you have the data, you would like to process using language data types. ",Object(l.b)("a",{parentName:"p",href:"https://godoc.org/github.com/frictionlessdata/tableschema-go/schema#example-Schema-CastTable"},"schema.CastTable")," and ",Object(l.b)("a",{parentName:"p",href:"https://godoc.org/github.com/frictionlessdata/tableschema-go/schema#example-Schema-CastRow"},"schema.CastRow")," are your friends on this journey."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport (\n   "github.com/frictionlessdata/tableschema-go/csv"\n   "github.com/frictionlessdata/tableschema-go/schema"\n)\n\ntype user struct {\n   ID   int\n   Age  int\n   Name string\n}\n\nfunc main() {\n   tab, _ := csv.NewTable(csv.FromFile("users.csv"), csv.LoadHeaders())\n   sch, _ := schema.Infer(tab)\n   var users []user\n   sch.CastTable(tab, &users)\n   // Users slice contains the table contents properly raw into\n   // language types. Each row will be a new user appended to the slice.\n}\n')),Object(l.b)("p",null,"If you have a lot of data and can no load everything in memory, you can easily iterate trough it:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-go"},"...\n   iter, _ := sch.Iter()\n   for iter.Next() {\n      var u user\n      sch.CastRow(iter.Row(), &u)\n      // Variable u is now filled with row contents properly raw\n      // to language types.\n   }\n...\n")),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"Even better if you could do it regardless the physical representation! The ",Object(l.b)("a",{parentName:"p",href:"https://godoc.org/github.com/frictionlessdata/tableschema-go/table"},"table")," package declares some interfaces that will help you to achieve this goal:")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",{parentName:"li",href:"https://godoc.org/github.com/frictionlessdata/tableschema-go/table#Table"},"Table")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",{parentName:"li",href:"https://godoc.org/github.com/frictionlessdata/tableschema-go/table#Iterator"},"Iterator"))),Object(l.b)("h3",{id:"field"},"Field"),Object(l.b)("p",null,"Class represents field in the schema."),Object(l.b)("p",null,"For example, data values can be castd to native Go types. Decoding a value will check if the value is of the expected type, is in the correct format, and complies with any constraints imposed by a schema."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-javascript"},"{\n    'name': 'birthday',\n    'type': 'date',\n    'format': 'default',\n    'constraints': {\n        'required': True,\n        'minimum': '2015-05-30'\n    }\n}\n")),Object(l.b)("p",null,"The following example will raise exception the passed-in is less than allowed by ",Object(l.b)("inlineCode",{parentName:"p"},"minimum")," constraints of the field. ",Object(l.b)("inlineCode",{parentName:"p"},"Errors")," will be returned as well when the user tries to cast values which are not well formatted dates."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-go"},'date, err := field.Cast("2014-05-29")\n// uh oh, something went wrong\n')),Object(l.b)("p",null,"Values that can't be castd will return an ",Object(l.b)("inlineCode",{parentName:"p"},"error"),".\nCasting a value that doesn't meet the constraints will return an ",Object(l.b)("inlineCode",{parentName:"p"},"error"),"."),Object(l.b)("p",null,"Available types, formats and resultant value of the cast:"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",{parentName:"tr",align:null},"Type"),Object(l.b)("th",{parentName:"tr",align:null},"Formats"),Object(l.b)("th",{parentName:"tr",align:null},"Casting result"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"any"),Object(l.b)("td",{parentName:"tr",align:null},"default"),Object(l.b)("td",{parentName:"tr",align:null},"interface{}")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"object"),Object(l.b)("td",{parentName:"tr",align:null},"default"),Object(l.b)("td",{parentName:"tr",align:null},"interface{}")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"array"),Object(l.b)("td",{parentName:"tr",align:null},"default"),Object(l.b)("td",{parentName:"tr",align:null},"[]interface{}")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"boolean"),Object(l.b)("td",{parentName:"tr",align:null},"default"),Object(l.b)("td",{parentName:"tr",align:null},"bool")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"duration"),Object(l.b)("td",{parentName:"tr",align:null},"default"),Object(l.b)("td",{parentName:"tr",align:null},"time.Time")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"geopoint"),Object(l.b)("td",{parentName:"tr",align:null},"default, array, object"),Object(l.b)("td",{parentName:"tr",align:null},"[float64, float64]")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"integer"),Object(l.b)("td",{parentName:"tr",align:null},"default"),Object(l.b)("td",{parentName:"tr",align:null},"int64")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"number"),Object(l.b)("td",{parentName:"tr",align:null},"default"),Object(l.b)("td",{parentName:"tr",align:null},"float64")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"string"),Object(l.b)("td",{parentName:"tr",align:null},"default, uri, email, binary"),Object(l.b)("td",{parentName:"tr",align:null},"string")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"date"),Object(l.b)("td",{parentName:"tr",align:null},"default, any, \\<PATTERN",">"),Object(l.b)("td",{parentName:"tr",align:null},"time.Time")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"datetime"),Object(l.b)("td",{parentName:"tr",align:null},"default, any, \\<PATTERN",">"),Object(l.b)("td",{parentName:"tr",align:null},"time.Time")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"time"),Object(l.b)("td",{parentName:"tr",align:null},"default, any, \\<PATTERN",">"),Object(l.b)("td",{parentName:"tr",align:null},"time.Time")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"year"),Object(l.b)("td",{parentName:"tr",align:null},"default"),Object(l.b)("td",{parentName:"tr",align:null},"time.Time")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"yearmonth"),Object(l.b)("td",{parentName:"tr",align:null},"default"),Object(l.b)("td",{parentName:"tr",align:null},"time.Time")))),Object(l.b)("h2",{id:"saving-tabular-data"},"Saving Tabular Data"),Object(l.b)("p",null,"Once you're done processing the data, it is time to persist results. As an example, let us assume we have a remote table schema called ",Object(l.b)("inlineCode",{parentName:"p"},"summary"),", which contains two fields:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"Date"),": of type ",Object(l.b)("a",{parentName:"li",href:"https://specs.frictionlessdata.io/table-schema/#date"},"date")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"AverageAge"),": of type ",Object(l.b)("a",{parentName:"li",href:"https://specs.frictionlessdata.io/table-schema/#number"},"number"))),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-go"},'import (\n   "github.com/frictionlessdata/tableschema-go/csv"\n   "github.com/frictionlessdata/tableschema-go/schema"\n)\n\n\ntype summaryEntry struct {\n    Date time.Time\n    AverageAge float64\n}\n\nfunc WriteSummary(summary []summaryEntry, path string) {\n   sch, _ := schema.LoadRemote("http://myfoobar/users/summary/schema.json")\n\n   f, _ := os.Create(path)\n   defer f.Close()\n\n   w := csv.NewWriter(f)\n   defer w.Flush()\n\n   w.Write([]string{"Date", "AverageAge"})\n   for _, summ := range summary{\n       row, _ := sch.UncastRow(summ)\n       w.Write(row)\n   }\n}\n')),Object(l.b)("h1",{id:"api-reference-and-more-examples"},"API Reference and More Examples"),Object(l.b)("p",null,"More detailed documentation about API methods and plenty of examples is available at ",Object(l.b)("a",{parentName:"p",href:"https://godoc.org/github.com/frictionlessdata/tableschema-go"},"https://godoc.org/github.com/frictionlessdata/tableschema-go")),Object(l.b)("h1",{id:"contributing"},"Contributing"),Object(l.b)("p",null,"Found a problem and would like to fix it? Have that great idea and would love to see it in the repository?"),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"Please open an issue before start working")),Object(l.b)("p",null,"That could save a lot of time from everyone and we are super happy to answer questions and help you alonge the way. Furthermore, feel free to join ",Object(l.b)("a",{parentName:"p",href:"https://gitter.im/frictionlessdata/chat"},"frictionlessdata Gitter chat room")," and ask questions."),Object(l.b)("p",null,"This project follows the ",Object(l.b)("a",{parentName:"p",href:"https://github.com/okfn/coding-standards"},"Open Knowledge International coding standards")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"Before start coding:"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"Fork and pull the latest version of the master branch"),Object(l.b)("li",{parentName:"ul"},"Make sure you have go 1.8+ installed and you're using it"),Object(l.b)("li",{parentName:"ul"},"Make sure you ",Object(l.b)("a",{parentName:"li",href:"https://github.com/golang/dep"},"dep")," installed"))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"Before sending the PR:"))),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-sh"},"$ cd $GOPATH/src/github.com/frictionlessdata/tableschema-go\n$ dep ensure\n$ go test ./..\n")),Object(l.b)("p",null,"And make sure your all tests pass."))}b.isMDXComponent=!0}}]);