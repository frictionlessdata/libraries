<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Frictionless Libraries Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Frictionless Libraries Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Frictionless Libraries" href="/opensearch.xml"><title data-react-helmet="true">tableschema-r | Frictionless Libraries</title><meta data-react-helmet="true" property="og:image" content="https://libraries.frictionlessdata.io/img/docusaurus.png"><meta data-react-helmet="true" name="twitter:image" content="https://libraries.frictionlessdata.io/img/docusaurus.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://libraries.frictionlessdata.io/docs/table-schema/rlang"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="tableschema-r | Frictionless Libraries"><meta data-react-helmet="true" name="description" content="CRAN\Status\Badge"><meta data-react-helmet="true" property="og:description" content="CRAN\Status\Badge"><link data-react-helmet="true" rel="shortcut icon" href="/img/logo.png"><link data-react-helmet="true" rel="canonical" href="https://libraries.frictionlessdata.io/docs/table-schema/rlang"><link data-react-helmet="true" rel="alternate" href="https://libraries.frictionlessdata.io/docs/table-schema/rlang" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://libraries.frictionlessdata.io/docs/table-schema/rlang" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.ce97fb61.css">
<link rel="preload" href="/assets/js/styles.761551f3.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.5a13008f.js" as="script">
<link rel="preload" href="/assets/js/main.8e68a39e.js" as="script">
<link rel="preload" href="/assets/js/1.b0b6591a.js" as="script">
<link rel="preload" href="/assets/js/2.6cabec78.js" as="script">
<link rel="preload" href="/assets/js/36.07a921c2.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.6f1dff16.js" as="script">
<link rel="preload" href="/assets/js/17896441.3a19c907.js" as="script">
<link rel="preload" href="/assets/js/2238bdc3.3968d0d1.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_RReh"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Frictionless Libraries Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo.png" alt="Frictionless Libraries Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Frictionless Libraries</strong></a><a class="navbar__item navbar__link" href="/docs/table-schema/python">Table Schema</a><a class="navbar__item navbar__link" href="/docs/data-package/python">Data Package</a><a class="navbar__item navbar__link" href="/docs/other-libraries/frictionless-ckan-mapper">Other Libraries</a><a class="navbar__item navbar__link" href="/docs/status">Status</a></div><div class="navbar__items navbar__items--right"><a href="https://frictionlessdata.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-mainsite-link">Back to the main site</a><a href="https://github.com/frictionlessdata/libraries" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_cxYs"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Frictionless Libraries Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo.png" alt="Frictionless Libraries Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Frictionless Libraries</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/python">Table Schema</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/data-package/python">Data Package</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/other-libraries/frictionless-ckan-mapper">Other Libraries</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/status">Status</a></li><li class="menu__list-item"><a href="https://frictionlessdata.io/" target="_blank" rel="noopener noreferrer" class="menu__link header-mainsite-link">Back to the main site</a></li><li class="menu__list-item"><a href="https://github.com/frictionlessdata/libraries" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_lDyR"><div class="docSidebarContainer_0YBq" role="complementary"><div class="sidebar_a3j0 sidebarWithHideableNavbar_VlPv"><a tabindex="-1" class="sidebarLogo_hmkv" href="/"><img src="/img/logo.png" alt="Frictionless Libraries Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.png" alt="Frictionless Libraries Logo" class="themedImage_TMUO themedImage--dark_uzRr"><strong>Frictionless Libraries</strong></a><div class="menu menu--responsive thin-scrollbar menu_cyFh"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_iZzd" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/python">tableschema-py</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/javascript">tableschema-js</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/ruby">tableschema-rb</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/php">tableschema-php</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/java">tableschema-java</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/go">tableschema-go</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/docs/table-schema/rlang">tableschema-r</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/julia">tableschema-jl</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/swift">tableschema-swift</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/clojure">tableschema-clj</a></li></ul></div></div></div><main class="docMainContainer_r8cw"><div class="container padding-vert--lg docItemWrapper_NJLN"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><header><h1 class="docTitle_-X99">tableschema-r</h1></header><div class="markdown"><p><a href="https://cran.r-project.org/package=tableschema.r" target="_blank" rel="noopener noreferrer"><img src="https://www.r-pkg.org/badges/version/tableschema.r" alt="CRAN_Status_Badge"></a>
<a href="https://travis-ci.org/frictionlessdata/tableschema-r" target="_blank" rel="noopener noreferrer"><img src="https://travis-ci.org/frictionlessdata/tableschema-r.svg?branch=master" alt="Build Status"></a>
<a href="https://coveralls.io/r/frictionlessdata/tableschema-r?branch=master" target="_blank" rel="noopener noreferrer"><img src="https://coveralls.io/repos/github/frictionlessdata/tableschema-r/badge.svg" alt="Coverage status"></a>
<a href="http://www.repostatus.org/#active" target="_blank" rel="noopener noreferrer"><img src="http://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active â€“ The project has reached a stable, usable state and is being actively developed."></a>
<a href="https://cran.r-project.org/" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/R%3E%3D-3.6-6666ff.svg" alt="minimal R version"></a>
<a href="http://cran.rstudio.com/web/packages/tableschema.r/index.html" target="_blank" rel="noopener noreferrer"><img src="http://cranlogs.r-pkg.org/badges/grand-total/tableschema.r" alt="Stats"></a>
<a href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/licence-MIT-blue.svg" alt="Licence"></a>
<a href="https://github.com/frictionlessdata/tableschema-r" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/codebase-github-brightgreen" alt="Codebase"></a>
<a href="https://discordapp.com/invite/Sewv6av" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/support-discord-brightgreen" alt="Support"></a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="description"></a>Description<a class="hash-link" href="#description" title="Direct link to heading">#</a></h2><p>R library for working with <a href="http://specs.frictionlessdata.io/table-schema/" target="_blank" rel="noopener noreferrer">Table
Schema</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="features"></a>Features<a class="hash-link" href="#features" title="Direct link to heading">#</a></h2><ul><li><code>Table</code> class for working with data and schema</li><li><code>Schema</code> class for working with schemas</li><li><code>Field</code> class for working with schema fields</li><li><code>validate</code> function for validating schema descriptors</li><li><code>infer</code> function that creates a schema based on a data sample</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="getting-started"></a>Getting started<a class="hash-link" href="#getting-started" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="installation"></a>Installation<a class="hash-link" href="#installation" title="Direct link to heading">#</a></h3><p>In order to install the latest distribution of <a href="https://www.r-project.org/" target="_blank" rel="noopener noreferrer">R
software</a> to your computer you have to
select one of the mirror sites of the <a href="https://cran.r-project.org/" target="_blank" rel="noopener noreferrer">Comprehensive R Archive
Network</a>, select the appropriate link for
your operating system and follow the wizard instructions.</p><p>For windows users you can:</p><ol><li>Go to CRAN</li><li>Click download R for Windows</li><li>Click Base (This is what you want to install R for the first time)</li><li>Download the latest R version</li><li>Run installation file and follow the instrustions of the installer.</li></ol><p>(Mac) OS X and Linux users may need to follow different steps depending
on their system version to install R successfully and it is recommended
to read the instructions on CRAN site carefully.</p><p>Even more detailed installation instructions can be found in <a href="https://cran.r-project.org/doc/manuals/R-admin.html" target="_blank" rel="noopener noreferrer">R
Installation and Administration
manual</a>.</p><p>To install <a href="https://www.rstudio.com/" target="_blank" rel="noopener noreferrer">RStudio</a>, you can download
<a href="https://www.rstudio.com/products/rstudio/download/" target="_blank" rel="noopener noreferrer">RStudio Desktop</a>
with Open Source License and follow the wizard instructions:</p><ol><li>Go to <a href="https://www.rstudio.com/products/rstudio/" target="_blank" rel="noopener noreferrer">RStudio</a></li><li>Click download on RStudio Desktop</li><li>Download on RStudio Desktop free download</li><li>Select the appropriate file for your system</li><li>Run installation file</li></ol><p>To install the <code>tableschema</code> library it is necessary to install first
<code>devtools</code> library to make installation of github libraries available.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain"># Install devtools package if not already</span></div><div class="token-line" style="color:#393A34"><span class="token plain">install.packages(&quot;devtools&quot;)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Install <code>tableschema.r</code></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain"># from CRAN version</span></div><div class="token-line" style="color:#393A34"><span class="token plain">install.packages(&quot;tableschema.r&quot;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"># or install the development version from github</span></div><div class="token-line" style="color:#393A34"><span class="token plain">devtools::install_github(&quot;frictionlessdata/tableschema-r&quot;)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="load-library"></a>Load library<a class="hash-link" href="#load-library" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain"># Install devtools package if not already</span></div><div class="token-line" style="color:#393A34"><span class="token plain"># install.packages(&quot;jsonlite&quot;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">library(jsonlite)</span></div><div class="token-line" style="color:#393A34"><span class="token plain"># Install devtools package if not already</span></div><div class="token-line" style="color:#393A34"><span class="token plain"># install.packages(&quot;future&quot;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">library(future)</span></div><div class="token-line" style="color:#393A34"><span class="token plain"># load the library using</span></div><div class="token-line" style="color:#393A34"><span class="token plain">library(tableschema.r)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="documentation"></a>Documentation<a class="hash-link" href="#documentation" title="Direct link to heading">#</a></h2><p><a href="https://CRAN.R-project.org/package=jsonlite" target="_blank" rel="noopener noreferrer">Jsonlite package</a> is
internally used to convert json data to list objects. The input
parameters of functions could be json strings, files or lists and the
outputs are in list format to easily further process your data in R
environment and exported as desired. The examples below show how to use
jsonlite package to convert the output back to json adding indentation
whitespace. More details about handling json you can see jsonlite
documentation or vignettes
<a href="https://CRAN.R-project.org/package=jsonlite" target="_blank" rel="noopener noreferrer">here</a>.</p><p>Moreover <a href="https://CRAN.R-project.org/package=future" target="_blank" rel="noopener noreferrer">future package</a> is
also used to load and create Table and Schema classes asynchronously. To
retrieve the actual result of the loaded Table or Schema you have to use
<code>value(...)</code> to the variable you stored the loaded Table/Schema. More
details about future package and sequential and parallel processing you
can find <a href="https://CRAN.R-project.org/package=future" target="_blank" rel="noopener noreferrer">here</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="working-with-table"></a>Working with Table<a class="hash-link" href="#working-with-table" title="Direct link to heading">#</a></h3><p>A table is a core concept in a tabular data world. It represents a data
with a metadata (Table Schema). Letâ€™s see how we could use it in
practice.</p><p>Consider we have some local csv file. It could be inline data or remote
link - all supported by <code>Table</code> class (except local files for in-brower
usage of course). But say itâ€™s <code>data.csv</code> for now:</p><blockquote><p>data/cities.csv</p></blockquote><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI csv"><div tabindex="0" class="prism-code language-csv codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">city,location</span></div><div class="token-line" style="color:#393A34"><span class="token plain">london,&quot;51.50,-0.11&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">paris,&quot;48.85,2.30&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">rome,N/A</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Letâ€™s create and read a table. We use static <code>Table.load</code> method and
<code>table.read</code> method with a <code>keyed</code> option to get list of keyed rows:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">def = Table.load(&#x27;inst/extdata/data.csv&#x27;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">table = value(def)</span></div><div class="token-line" style="color:#393A34"><span class="token plain"># add indentation whitespace to JSON output with jsonlite package</span></div><div class="token-line" style="color:#393A34"><span class="token plain">toJSON(table$read(keyed = TRUE), pretty = TRUE) # function from jsonlite package</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## [</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     &quot;city&quot;: [&quot;london&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     &quot;location&quot;: [&quot;\&quot;51.50 -0.11\&quot;&quot;]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     &quot;city&quot;: [&quot;paris&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     &quot;location&quot;: [&quot;\&quot;48.85 2.30\&quot;&quot;]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     &quot;city&quot;: [&quot;rome&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     &quot;location&quot;: [&quot;N/A&quot;]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">## ]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">table.headers = table$headers</span></div><div class="token-line" style="color:#393A34"><span class="token plain">table.headers</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## [[1]]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">## [1] &quot;city&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##</span></div><div class="token-line" style="color:#393A34"><span class="token plain">## [[2]]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">## [1] &quot;location&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>As we could see our locations are just a strings. But it should be
geopoints. Also Romeâ€™s location is not available but itâ€™s also just a
<code>N/A</code> string instead of <code>null</code>. First we have to infer Table Schema:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain"># add indentation whitespace to JSON output with jsonlite package</span></div><div class="token-line" style="color:#393A34"><span class="token plain">toJSON(table$infer(), pretty = TRUE) # function from jsonlite package</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   &quot;fields&quot;: [</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;name&quot;: [&quot;city&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;type&quot;: [&quot;string&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;format&quot;: [&quot;default&quot;]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;name&quot;: [&quot;location&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;type&quot;: [&quot;string&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;format&quot;: [&quot;default&quot;]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   ],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   &quot;missingValues&quot;: [</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     [&quot;&quot;]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">## }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">toJSON(table$schema$descriptor, pretty = TRUE) # function from jsonlite package</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   &quot;fields&quot;: [</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;name&quot;: [&quot;city&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;type&quot;: [&quot;string&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;format&quot;: [&quot;default&quot;]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;name&quot;: [&quot;location&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;type&quot;: [&quot;string&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;format&quot;: [&quot;default&quot;]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   ],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   &quot;missingValues&quot;: [</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     [&quot;&quot;]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">## }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">table$read(keyed = TRUE) # Fails</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Letâ€™s fix not available location. There is a <code>missingValues</code> property in
Table Schema specification. As a first try we set <code>missingValues</code> to
<code>N/A</code> in <code>table$schema$descriptor</code>. Schema descriptor could be changed
in-place but all changes should be commited by <code>table$schema$commit()</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">table$schema$descriptor[&#x27;missingValues&#x27;] = &#x27;N/A&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">table$schema$commit()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## [1] TRUE</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">table$schema$valid # false</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## [1] FALSE</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">table$schema$errors</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## [[1]]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">## [1] &quot;Descriptor validation error:\n            data.missingValues - is the wrong type&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>As a good citiziens weâ€™ve decided to check out schema descriptor
validity. And itâ€™s not valid! We sould use an list for <code>missingValues</code>
property. Also donâ€™t forget to have an empty string as a missing value:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">table$schema$descriptor[[&#x27;missingValues&#x27;]] = list(&quot;&quot;, &#x27;N/A&#x27;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">table$schema$commit()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## [1] TRUE</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">table$schema$valid # true</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## [1] TRUE</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>All good. It looks like weâ€™re ready to read our data again:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">table$read() # or</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">toJSON(table$read(), pretty = TRUE) # function from jsonlite package</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Now we see that:</p><ul><li><p>locations are lists with numeric lattide and longitude</p></li><li><p>Romeâ€™s location is <code>null</code></p></li></ul><p>And because there are no errors on data reading we could be sure that
our data is valid againt our schema. Letâ€™s save it:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">table$schema$save(&#x27;schema.json&#x27;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">table$save(&#x27;data.csv&#x27;)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Our <code>data.csv</code> looks the same because it has been stringified back to
<code>csv</code> format. But now we have <code>schema.json</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI json"><div tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">&quot;fields&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;city&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;string&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">&quot;format&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;default&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;location&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;geopoint&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">&quot;format&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;default&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">&quot;missingValues&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;N/A&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>If we decide to improve it even more we could update the schema file and
then open it again. But now providing a schema path.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">def = Table.load(&#x27;inst/extdata/data.csv&#x27;, schema = &#x27;inst/extdata/schema.json&#x27;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">table = value(def)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">table</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## &lt;Table&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   Public:</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     clone: function (deep = FALSE)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     headers: active binding</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     infer: function (limit = 100)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     initialize: function (src, schema = NULL, strict = FALSE, headers = 1)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     iter: function (keyed, extended, cast = TRUE, relations = FALSE, stream = FALSE)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     read: function (keyed = FALSE, extended = FALSE, cast = TRUE, relations = FALSE,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     save: function (connection)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     schema: active binding</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   Private:</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     createRowStream_: function (src)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     createUniqueFieldsCache: function (schema)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     currentStream_: NULL</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     headers_: NULL</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     headersRow_: 1</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     rowNumber_: 0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     schema_: Schema, R6</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     src: inst/extdata/data.csv</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     strict_: FALSE</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     uniqueFieldsCache_: list</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>It was only basic introduction to the <code>Table</code> class. To learn more letâ€™s
take a look on <code>Table</code> class API reference.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="working-with-schema"></a>Working with Schema<a class="hash-link" href="#working-with-schema" title="Direct link to heading">#</a></h2><p>A model of a schema with helpful methods for working with the schema and
supported data. Schema instances can be initialized with a schema source
as a url to a JSON file or a JSON object. The schema is initially
validated (see <a href="#validate">validate</a> below). By default validation
errors will be stored in <code>schema$errors</code> but in a strict mode it will be
instantly raised.</p><p>Letâ€™s create a blank schema. Itâ€™s not valid because <code>descriptor$fields</code>
property is required by the <a href="http://specs.frictionlessdata.io/table-schema/" target="_blank" rel="noopener noreferrer">Table
Schema</a> specification:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">def = Schema.load({})</span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema = value(def)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema$valid # false</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## [1] FALSE</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema$errors</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## [[1]]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">## [1] &quot;Descriptor validation error:\n            data.fields - is required&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>To do not create a schema descriptor by hands we will use a
<code>schema$infer</code> method to infer the descriptor from given data:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">toJSON(</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  schema$infer(helpers.from.json.to.list(&#x27;[</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    [&quot;id&quot;, &quot;age&quot;, &quot;name&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    [&quot;1&quot;,&quot;39&quot;,&quot;Paul&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    [&quot;2&quot;,&quot;23&quot;,&quot;Jimmy&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    [&quot;3&quot;,&quot;36&quot;,&quot;Jane&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    [&quot;4&quot;,&quot;28&quot;,&quot;Judy&quot;]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    ]&#x27;)), pretty = TRUE) # function from jsonlite package</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   &quot;fields&quot;: [</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;name&quot;: [&quot;id&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;type&quot;: [&quot;integer&quot;]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;name&quot;: [&quot;age&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;type&quot;: [&quot;integer&quot;]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;name&quot;: [&quot;name&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;type&quot;: [&quot;string&quot;]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">## }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema$valid # true</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## [1] TRUE</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">toJSON(</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  schema$descriptor,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  pretty = TRUE) # function from jsonlite package</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   &quot;fields&quot;: [</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;name&quot;: [&quot;id&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;type&quot;: [&quot;integer&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;format&quot;: [&quot;default&quot;]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;name&quot;: [&quot;age&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;type&quot;: [&quot;integer&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;format&quot;: [&quot;default&quot;]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;name&quot;: [&quot;name&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;type&quot;: [&quot;string&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;format&quot;: [&quot;default&quot;]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   ],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   &quot;missingValues&quot;: [</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     [&quot;&quot;]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">## }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Now we have an inferred schema and itâ€™s valid. We could cast data row
against our schema. We provide a string input by an output will be cast
correspondingly:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">toJSON(</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  schema$castRow(helpers.from.json.to.list(&#x27;[&quot;5&quot;, &quot;66&quot;, &quot;Sam&quot;]&#x27;)),</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  pretty = TRUE, auto_unbox = TRUE) # function from jsonlite package</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## [</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   5,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   66,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   &quot;Sam&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">## ]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>But if we try provide some missing value to <code>age</code> field cast will fail
because for now only one possible missing value is an empty string.
Letâ€™s update our schema:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema$castRow(helpers.from.json.to.list(&#x27;[&quot;6&quot;, &quot;N/A&quot;, &quot;Walt&quot;]&#x27;))</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## Error in schema$castRow(helpers.from.json.to.list(&quot;[\&quot;6\&quot;, \&quot;N/A\&quot;, \&quot;Walt\&quot;]&quot;)): There are 1 cast errors (see following - Wrong type for header: age and value: N/A</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain"># Cast error</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema$descriptor$missingValues = list(&#x27;&#x27;, &#x27;NA&#x27;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema$commit()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## [1] TRUE</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema$castRow(helpers.from.json.to.list(&#x27;[&quot;6&quot;, &quot;&quot;, &quot;Walt&quot;]&#x27;))</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## [[1]]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">## [1] 6</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##</span></div><div class="token-line" style="color:#393A34"><span class="token plain">## [[2]]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">## NULL</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##</span></div><div class="token-line" style="color:#393A34"><span class="token plain">## [[3]]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">## [1] &quot;Walt&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>We could save the schema to a local file. And we could continue the work
in any time just loading it from the local file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema$save(&#x27;schema.json&#x27;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema = Schema.load(&#x27;schema.json&#x27;)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>It was only basic introduction to the <code>Schema</code> class. To learn more
letâ€™s take a look on <code>Schema</code> class API reference.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="working-with-field"></a>Working with Field<a class="hash-link" href="#working-with-field" title="Direct link to heading">#</a></h3><p>Class represents field in the schema.</p><p>Data values can be cast to native R types. Casting a value will check
the value is of the expected type, is in the correct format, and
complies with any constraints imposed by a schema.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI json"><div tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;birthday&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;date&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">&quot;format&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;default&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">&quot;constraints&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">&quot;required&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">&quot;minimum&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2015-05-30&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Following code will not raise the exception, despite the fact our date
is less than minimum constraints in the field, because we do not check
constraints of the field descriptor</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">field = Field$new(helpers.from.json.to.list(&#x27;{&quot;name&quot;: &quot;name&quot;, &quot;type&quot;: &quot;number&quot;}&#x27;))</span></div><div class="token-line" style="color:#393A34"><span class="token plain">dateType = field$cast_value(&#x27;12345&#x27;) # cast</span></div><div class="token-line" style="color:#393A34"><span class="token plain">dateType # print the result</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## [1] 12345</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>And following example will raise exception, because we set flag â€˜skip
constraintsâ€™ to <code>false</code>, and our date is less than allowed by <code>minimum</code>
constraints of the field. Exception will be raised as well in situation
of trying to cast non-date format values, or empty values</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">tryCatch(</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  dateType = field$cast_value(value = &#x27;2014-05-29&#x27;, constraints = FALSE),</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  error = function(e){# uh oh, something went wrong</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  })</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## Error in private$castValue(...): Field character(0) can&#x27;t cast value 2014-05-29 for type number with format default</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Values that canâ€™t be cast will raise an <code>Error</code> exception. Casting a
value that doesnâ€™t meet the constraints will raise an <code>Error</code> exception.</p><p>Table below shows the available types, formats and resultant value of
the cast:</p><table><thead><tr><th align="left">Type</th><th align="left">Formats</th><th align="left">Casting result</th></tr></thead><tbody><tr><td align="left">any</td><td align="left">default</td><td align="left">Any</td></tr><tr><td align="left">list</td><td align="left"></td><td align="left">default</td></tr><tr><td align="left">boolean</td><td align="left">default</td><td align="left">Boolean</td></tr><tr><td align="left">date</td><td align="left">default, any</td><td align="left">Date</td></tr><tr><td align="left">datetime</td><td align="left">default, any</td><td align="left">Date</td></tr><tr><td align="left">duration</td><td align="left">default</td><td align="left">Duration</td></tr><tr><td align="left">geojson</td><td align="left">default, topojson</td><td align="left">Object</td></tr><tr><td align="left">geopoint</td><td align="left">default, list, object</td><td align="left">[Number, Number]</td></tr><tr><td align="left">integer</td><td align="left">default</td><td align="left">Number</td></tr><tr><td align="left">number</td><td align="left">default</td><td align="left">Number</td></tr><tr><td align="left">object</td><td align="left">default</td><td align="left">Object</td></tr><tr><td align="left">string</td><td align="left">default, uri, email, binary</td><td align="left">String</td></tr><tr><td align="left">time</td><td align="left">default, any</td><td align="left">Date</td></tr><tr><td align="left">year</td><td align="left">default</td><td align="left">Number</td></tr><tr><td align="left">yearmonth</td><td align="left">default</td><td align="left">[Number, Number]</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="working-with-validate"></a>Working with Validate<a class="hash-link" href="#working-with-validate" title="Direct link to heading">#</a></h4><blockquote><p><code>validate()</code> validates whether a <strong>schema</strong> is a validate Table Schema
accordingly to the
<a href="https://frictionlessdata.io/schemas/table-schema.json" target="_blank" rel="noopener noreferrer">specifications</a>.
It does <strong>not</strong> validate data against a schema.</p></blockquote><p>Given a schema descriptor <code>validate</code> returns a validation object:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">valid_errors = validate(&#x27;inst/extdata/schema.json&#x27;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">valid_errors</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## $valid</span></div><div class="token-line" style="color:#393A34"><span class="token plain">## [1] TRUE</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##</span></div><div class="token-line" style="color:#393A34"><span class="token plain">## $errors</span></div><div class="token-line" style="color:#393A34"><span class="token plain">## list()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="working-with-infer"></a>Working with Infer<a class="hash-link" href="#working-with-infer" title="Direct link to heading">#</a></h4><p>Given data source and headers <code>infer</code> will return a Table Schema as a
JSON object based on the data values.</p><p>Given the data file, example.csv:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI csv"><div tabindex="0" class="prism-code language-csv codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">id,age,name</span></div><div class="token-line" style="color:#393A34"><span class="token plain">1,39,Paul</span></div><div class="token-line" style="color:#393A34"><span class="token plain">2,23,Jimmy</span></div><div class="token-line" style="color:#393A34"><span class="token plain">3,36,Jane</span></div><div class="token-line" style="color:#393A34"><span class="token plain">4,28,Judy</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Call <code>infer</code> with headers and values from the datafile:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">descriptor = infer(&#x27;inst/extdata/data_infer.csv&#x27;)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>The <code>descriptor</code> variable is now a list object that can easily converted
to JSON:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">toJSON(</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  descriptor,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  pretty = TRUE</span></div><div class="token-line" style="color:#393A34"><span class="token plain">) # function from jsonlite package</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   &quot;fields&quot;: [</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;name&quot;: [&quot;id&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;type&quot;: [&quot;integer&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;format&quot;: [&quot;default&quot;]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;name&quot;: [&quot;age&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;type&quot;: [&quot;integer&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;format&quot;: [&quot;default&quot;]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;name&quot;: [&quot;name&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;type&quot;: [&quot;string&quot;],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##       &quot;format&quot;: [&quot;default&quot;]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   ],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   &quot;missingValues&quot;: [</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##     [&quot;&quot;]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">##   ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">## }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="api-reference"></a>API Reference<a class="hash-link" href="#api-reference" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="table"></a>Table<a class="hash-link" href="#table" title="Direct link to heading">#</a></h3><p>Table representation</p><ul><li><a href="#Table">Table</a><ul><li><em>instance</em><ul><li><a href="#Table+headers">$headers</a> â‡’ <code>List.\&lt;string\&gt;</code></li><li><a href="#Table+schema">$schema</a> â‡’ <code>Schema</code></li><li><a href="#Table+iter">$iter(keyed, extended, cast, forceCast, relations,
stream)</a> â‡’ <code>AsyncIterator</code> |
<code>Stream</code></li><li><a href="#Table+read">$read(limit)</a> â‡’ <code>List.\&lt;List\&gt;</code> |
<code>List.\&lt;Object\&gt;</code></li><li><a href="#Table+infer">$infer(limit)</a> â‡’ <code>Object</code></li><li><a href="#Table+save">$save(target)</a> â‡’ <code>Boolean</code></li></ul></li><li><em>static</em><ul><li><a href="#Table.load">.load(source, schema, strict, headers,
parserOptions)</a> â‡’ <a href="#Table"><code>Table</code></a></li></ul></li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="tableheaders--liststring"></a>table$headers â‡’ <code>List.\&lt;string\&gt;</code><a class="hash-link" href="#tableheaders--liststring" title="Direct link to heading">#</a></h4><p>Headers</p><p><strong>Returns</strong>: <code>List.\&lt;string\&gt;</code> - data source headers</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="tableschema--schema"></a>table$schema â‡’ <code>Schema</code><a class="hash-link" href="#tableschema--schema" title="Direct link to heading">#</a></h4><p>Schema</p><p><strong>Returns</strong>: <code>Schema</code> - table schema instance</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="tableiterkeyed-extended-cast-forcecast-relations-stream--asynciterator--stream"></a>table$iter(keyed, extended, cast, forceCast, relations, stream) â‡’ <code>AsyncIterator</code> | <code>Stream</code><a class="hash-link" href="#tableiterkeyed-extended-cast-forcecast-relations-stream--asynciterator--stream" title="Direct link to heading">#</a></h4><p>Iterate through the table data</p><p>And emits rows cast based on table schema (async for loop). With a
<code>stream</code> flag instead of async iterator a Node stream will be returned.
Data casting can be disabled.</p><p><strong>Returns</strong>: <code>AsyncIterator</code> | <code>Stream</code> - async
iterator/stream of rows: - <code>[value1, value2]</code> - base - <code>{header1:
value1, header2: value2}</code> - keyed - <code>[rowNumber, [header1, header2],
[value1, value2]]</code> - extended <strong>Throws</strong>:</p><ul><li><code>TableSchemaError</code> raises any error occurred in this
process</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>keyed</td><td><code>boolean</code></td><td>iter keyed rows</td></tr><tr><td>extended</td><td><code>boolean</code></td><td>iter extended rows</td></tr><tr><td>cast</td><td><code>boolean</code></td><td>disable data casting if false</td></tr><tr><td>forceCast</td><td><code>boolean</code></td><td>instead of raising on the first row with cast error return an error object to replace failed row. It will allow to iterate over the whole data file even if itâ€™s not compliant to the schema. Example of output stream: <code>[[&#x27;val1&#x27;, &#x27;val2&#x27;], TableSchemaError, [&#x27;val3&#x27;, &#x27;val4&#x27;], ...]</code></td></tr><tr><td>relations</td><td><code>Object</code></td><td>object of foreign key references in a form of <code>{resource1: [{field1: value1, field2: value2}, ...], ...}</code>. If provided foreign key fields will checked and resolved to its references</td></tr><tr><td>stream</td><td><code>boolean</code></td><td>return Node Readable Stream of table rows</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="tablereadlimit--listlist--listobject"></a>table$read(limit) â‡’ <code>List.\&lt;List\&gt;</code> | <code>List.\&lt;Object\&gt;</code><a class="hash-link" href="#tablereadlimit--listlist--listobject" title="Direct link to heading">#</a></h4><p>Read the table data into memory</p><blockquote><p>The API is the same as <code>table.iter</code> has except for:</p></blockquote><p><strong>Returns</strong>: <code>List.\&lt;List\&gt;</code> | <code>List.\&lt;Object\&gt;</code> -
list of rows: - <code>[value1, value2]</code> - base - <code>{header1: value1, header2:
value2}</code> - keyed - <code>[rowNumber, [header1, header2], [value1, value2]]</code> -
extended</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>limit</td><td><code>integer</code></td><td>limit of rows to read</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="tableinferlimit--object"></a>table$infer(limit) â‡’ <code>Object</code><a class="hash-link" href="#tableinferlimit--object" title="Direct link to heading">#</a></h4><p>Infer a schema for the table.</p><p>It will infer and set Table Schema to <code>table.schema</code> based on table
data.</p><p><strong>Returns</strong>: <code>Object</code> - Table Schema descriptor</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>limit</td><td><code>number</code></td><td>limit rows sample size</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="tablesavetarget--boolean"></a>table$save(target) â‡’ <code>Boolean</code><a class="hash-link" href="#tablesavetarget--boolean" title="Direct link to heading">#</a></h4><p>Save data source to file locally in CSV format with <code>,</code> (comma)
delimiter</p><p><strong>Returns</strong>: <code>Boolean</code> - true on success <strong>Throws</strong>:</p><ul><li><code>TableSchemaError</code> an error if there is saving problem</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>target</td><td><code>string</code></td><td>path where to save a table data</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="tableloadsource-schema-strict-headers-parseroptions--table"></a>Table.load(source, schema, strict, headers, parserOptions) â‡’ <a href="#Table"><code>Table</code></a><a class="hash-link" href="#tableloadsource-schema-strict-headers-parseroptions--table" title="Direct link to heading">#</a></h4><p>Factory method to instantiate <code>Table</code> class.</p><p>This method is async and it should be used with await keyword or as a
<code>Promise</code>. If <code>references</code> argument is provided foreign keys will be
checked on any reading operation.</p><p><strong>Returns</strong>: <a href="#Table"><code>Table</code></a> - data table class instance
<strong>Throws</strong>:</p><ul><li><code>TableSchemaError</code> raises any error occurred in table
creation process</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>source</td><td><code>string</code></td><td><code>List.\&lt;List\&gt;</code></td></tr><tr><td>schema</td><td><code>string</code></td><td><code>Object</code></td></tr><tr><td>strict</td><td><code>boolean</code></td><td>strictness option to pass to <code>Schema</code> constructor</td></tr><tr><td>headers</td><td><code>number</code></td><td><code>List.\&lt;string\&gt;</code></td></tr><tr><td>parserOptions</td><td><code>Object</code></td><td>options to be used by CSV parser. All options listed at <a href="https://csv.js.org/parse/options/" target="_blank" rel="noopener noreferrer">https://csv.js.org/parse/options/</a>. By default <code>ltrim</code> is true according to the CSV Dialect spec.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="schema"></a>Schema<a class="hash-link" href="#schema" title="Direct link to heading">#</a></h3><p>Schema representation</p><ul><li><a href="#Schema">Schema</a><ul><li><em>instance</em><ul><li><a href="#Schema+valid">$valid</a> â‡’ <code>Boolean</code></li><li><a href="#Schema+errors">$errors</a> â‡’ <code>List.\&lt;Error\&gt;</code></li><li><a href="#Schema+descriptor">$descriptor</a> â‡’ <code>Object</code></li><li><a href="#Schema+primaryKey">$primaryKey</a> â‡’
<code>List.\&lt;string\&gt;</code></li><li><a href="#Schema+foreignKeys">$foreignKeys</a> â‡’
<code>List.\&lt;Object\&gt;</code></li><li><a href="#Schema+fields">$fields</a> â‡’ <code>List.\&lt;Field\&gt;</code></li><li><a href="#Schema+fieldNames">$fieldNames</a> â‡’
<code>List.\&lt;string\&gt;</code></li><li><a href="#Schema+getField">$getField(fieldName)</a> â‡’
<code>Field</code> | <code>null</code></li><li><a href="#Schema+addField">$addField(descriptor)</a> â‡’
<code>Field</code></li><li><a href="#Schema+removeField">$removeField(name)</a> â‡’
<code>Field</code> | <code>null</code></li><li><a href="#Schema+castRow">$castRow(row, failFalst)</a> â‡’
<code>List.\&lt;List\&gt;</code></li><li><a href="#Schema+infer">$infer(rows, headers)</a> â‡’ <code>Object</code></li><li><a href="#Schema+commit">$commit(strict)</a> â‡’ <code>Boolean</code></li><li><a href="#Schema+save">$save(target)</a> â‡’ <code>boolean</code></li></ul></li><li><em>static</em><ul><li><a href="#Schema.load">.load(descriptor, strict)</a> â‡’
<a href="#Schema"><code>Schema</code></a></li></ul></li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemavalid--boolean"></a>schema$valid â‡’ <code>Boolean</code><a class="hash-link" href="#schemavalid--boolean" title="Direct link to heading">#</a></h4><p>Validation status</p><p>It always <code>true</code> in strict mode.</p><p><strong>Returns</strong>: <code>Boolean</code> - returns validation status</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemaerrors--listerror"></a>schema$errors â‡’ <code>List.\&lt;Error\&gt;</code><a class="hash-link" href="#schemaerrors--listerror" title="Direct link to heading">#</a></h4><p>Validation errors</p><p>It always empty in strict mode.</p><p><strong>Returns</strong>: <code>List.\&lt;Error\&gt;</code> - returns validation errors</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemadescriptor--object"></a>schema$descriptor â‡’ <code>Object</code><a class="hash-link" href="#schemadescriptor--object" title="Direct link to heading">#</a></h4><p>Descriptor</p><p><strong>Returns</strong>: <code>Object</code> - schema descriptor</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemaprimarykey--liststring"></a>schema$primaryKey â‡’ <code>List.\&lt;string\&gt;</code><a class="hash-link" href="#schemaprimarykey--liststring" title="Direct link to heading">#</a></h4><p>Primary Key</p><p><strong>Returns</strong>: <code>List.\&lt;string\&gt;</code> - schema primary key</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemaforeignkeys--listobject"></a>schema$foreignKeys â‡’ <code>List.\&lt;Object\&gt;</code><a class="hash-link" href="#schemaforeignkeys--listobject" title="Direct link to heading">#</a></h4><p>Foreign Keys</p><p><strong>Returns</strong>: <code>List.\&lt;Object\&gt;</code> - schema foreign keys</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemafields--listfield"></a>schema$fields â‡’ <code>List.\&lt;Field\&gt;</code><a class="hash-link" href="#schemafields--listfield" title="Direct link to heading">#</a></h4><p>Fields</p><p><strong>Returns</strong>: <code>List.\&lt;Field\&gt;</code> - schema fields</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemafieldnames--liststring"></a>schema$fieldNames â‡’ <code>List.\&lt;string\&gt;</code><a class="hash-link" href="#schemafieldnames--liststring" title="Direct link to heading">#</a></h4><p>Field names</p><p><strong>Returns</strong>: <code>List.\&lt;string\&gt;</code> - schema field names</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemagetfieldfieldname--field--null"></a>schema$getField(fieldName) â‡’ <code>Field</code> | <code>null</code><a class="hash-link" href="#schemagetfieldfieldname--field--null" title="Direct link to heading">#</a></h4><p>Return a field</p><p><strong>Returns</strong>: <code>Field</code> | <code>null</code> - field instance if
exists</p><table><thead><tr><th>Param</th><th>Type</th></tr></thead><tbody><tr><td>fieldName</td><td><code>string</code></td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemaaddfielddescriptor--field"></a>schema$addField(descriptor) â‡’ <code>Field</code><a class="hash-link" href="#schemaaddfielddescriptor--field" title="Direct link to heading">#</a></h4><p>Add a field</p><p><strong>Returns</strong>: <code>Field</code> - added field instance</p><table><thead><tr><th>Param</th><th>Type</th></tr></thead><tbody><tr><td>descriptor</td><td><code>Object</code></td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemaremovefieldname--field--null"></a>schema$removeField(name) â‡’ <code>Field</code> | <code>null</code><a class="hash-link" href="#schemaremovefieldname--field--null" title="Direct link to heading">#</a></h4><p>Remove a field</p><p><strong>Returns</strong>: <code>Field</code> | <code>null</code> - removed field
instance if exists</p><table><thead><tr><th>Param</th><th>Type</th></tr></thead><tbody><tr><td>name</td><td><code>string</code></td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemacastrowrow-failfalst--listlist"></a>schema$castRow(row, failFalst) â‡’ <code>List.\&lt;List\&gt;</code><a class="hash-link" href="#schemacastrowrow-failfalst--listlist" title="Direct link to heading">#</a></h4><p>Cast row based on field types and formats.</p><p><strong>Returns</strong>: <code>List.\&lt;List\&gt;</code> - cast data row</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>row</td><td><code>List.\&lt;List\&gt;</code></td><td>data row as an list of values</td></tr><tr><td>failFalst</td><td><code>boolean</code></td><td></td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemainferrows-headers--object"></a>schema$infer(rows, headers) â‡’ <code>Object</code><a class="hash-link" href="#schemainferrows-headers--object" title="Direct link to heading">#</a></h4><p>Infer and set <code>schema.descriptor</code> based on data sample.</p><p><strong>Returns</strong>: <code>Object</code> - Table Schema descriptor</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>rows</td><td><code>List.\&lt;List\&gt;</code></td><td>list of lists representing rows</td></tr><tr><td>headers</td><td><code>integer</code></td><td><code>List.\&lt;string\&gt;</code></td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemacommitstrict--boolean"></a>schema$commit(strict) â‡’ <code>Boolean</code><a class="hash-link" href="#schemacommitstrict--boolean" title="Direct link to heading">#</a></h4><p>Update schema instance if there are in-place changes in the descriptor.</p><p><strong>Returns</strong>: <code>Boolean</code> - returns true on success and false if
not modified <strong>Throws</strong>:</p><ul><li><code>TableSchemaError</code> raises any error occurred in the
process</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>strict</td><td><code>boolean</code></td><td>alter <code>strict</code> mode for further work</td></tr></tbody></table><p><strong>Example</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">descriptor &lt;- &#x27;{&quot;fields&quot;: [{&quot;name&quot;: &quot;field&quot;, &quot;type&quot;: &quot;string&quot;}]}&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">def &lt;- Schema.load(descriptor)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema &lt;- value(def)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema$getField(&#x27;name&#x27;)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## NULL</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema$descriptor$fields[[1]]$type</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## [1] &quot;string&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema$descriptor$fields[[1]]$type &lt;-&#x27;number&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema$descriptor$fields[[1]]$type</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## [1] &quot;number&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema$commit()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">## [1] TRUE</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemasavetarget--boolean"></a>schema$save(target) â‡’ <code>boolean</code><a class="hash-link" href="#schemasavetarget--boolean" title="Direct link to heading">#</a></h4><p>Save schema descriptor to target destination.</p><p><strong>Returns</strong>: <code>boolean</code> - returns true on success <strong>Throws</strong>:</p><ul><li><code>TableSchemaError</code> raises any error occurred in the
process</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>target</td><td><code>string</code></td><td>path where to save a descriptor</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemaloaddescriptor-strict--schema"></a>Schema.load(descriptor, strict) â‡’ <a href="#Schema"><code>Schema</code></a><a class="hash-link" href="#schemaloaddescriptor-strict--schema" title="Direct link to heading">#</a></h4><p>Factory method to instantiate <code>Schema</code> class.</p><p>This method is async and it should be used with await keyword or as a
<code>Promise</code>.</p><p><strong>Returns</strong>: <a href="#Schema"><code>Schema</code></a> - returns schema class
instance <strong>Throws</strong>:</p><ul><li><code>TableSchemaError</code> raises any error occurred in the
process</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>descriptor</td><td><code>string</code></td><td><code>Object</code></td></tr><tr><td>strict</td><td><code>boolean</code></td><td>flag to alter validation behaviour: - if false error will not be raised and all error will be collected in <code>schema.errors</code> - if strict is true any validation error will be raised immediately</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="field"></a>Field<a class="hash-link" href="#field" title="Direct link to heading">#</a></h3><p>Field representation</p><ul><li><a href="#Field">Field</a><ul><li><a href="#new_Field_new">new Field(descriptor, missingValues)</a></li><li><a href="#Field+name">$name</a> â‡’ <code>string</code></li><li><a href="#Field+type">$type</a> â‡’ <code>string</code></li><li><a href="#Field+format">$format</a> â‡’ <code>string</code></li><li><a href="#Field+required">$required</a> â‡’ <code>boolean</code></li><li><a href="#Field+constraints">$constraints</a> â‡’ <code>Object</code></li><li><a href="#Field+descriptor">$descriptor</a> â‡’ <code>Object</code></li><li><a href="#Field+castValue">$castValue(value, constraints)</a> â‡’
<code>any</code></li><li><a href="#Field+testValue">$testValue(value, constraints)</a> â‡’
<code>boolean</code></li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="new-fielddescriptor-missingvalues"></a>new Field(descriptor, missingValues)<a class="hash-link" href="#new-fielddescriptor-missingvalues" title="Direct link to heading">#</a></h4><p>Constructor to instantiate <code>Field</code> class.</p><p><strong>Returns</strong>: <a href="#Field"><code>Field</code></a> - returns field class instance
<strong>Throws</strong>:</p><ul><li><code>TableSchemaError</code> raises any error occured in the
process</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>descriptor</td><td><code>Object</code></td><td>schema field descriptor</td></tr><tr><td>missingValues</td><td><code>List.\&lt;string\&gt;</code></td><td>an list with string representing missing values</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fieldname--string"></a>field$name â‡’ <code>string</code><a class="hash-link" href="#fieldname--string" title="Direct link to heading">#</a></h4><p>Field name</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fieldtype--string"></a>field$type â‡’ <code>string</code><a class="hash-link" href="#fieldtype--string" title="Direct link to heading">#</a></h4><p>Field type</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fieldformat--string"></a>field$format â‡’ <code>string</code><a class="hash-link" href="#fieldformat--string" title="Direct link to heading">#</a></h4><p>Field format</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fieldrequired--boolean"></a>field$required â‡’ <code>boolean</code><a class="hash-link" href="#fieldrequired--boolean" title="Direct link to heading">#</a></h4><p>Return true if field is required</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fieldconstraints--object"></a>field$constraints â‡’ <code>Object</code><a class="hash-link" href="#fieldconstraints--object" title="Direct link to heading">#</a></h4><p>Field constraints</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fielddescriptor--object"></a>field$descriptor â‡’ <code>Object</code><a class="hash-link" href="#fielddescriptor--object" title="Direct link to heading">#</a></h4><p>Field descriptor</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fieldcastvaluevalue-constraints--any"></a>field$castValue(value, constraints) â‡’ <code>any</code><a class="hash-link" href="#fieldcastvaluevalue-constraints--any" title="Direct link to heading">#</a></h4><p>Cast value</p><p><strong>Returns</strong>: <code>any</code> - cast value</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>value</td><td><code>any</code></td><td>value to cast</td></tr><tr><td>constraints</td><td><code>Object</code></td><td><code>false</code></td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fieldtestvaluevalue-constraints--boolean"></a>field$testValue(value, constraints) â‡’ <code>boolean</code><a class="hash-link" href="#fieldtestvaluevalue-constraints--boolean" title="Direct link to heading">#</a></h4><p>Check if value can be cast</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>value</td><td><code>any</code></td><td>value to test</td></tr><tr><td>constraints</td><td><code>Object</code></td><td><code>false</code></td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="validatedescriptor--object"></a>validate(descriptor) â‡’ <code>Object</code><a class="hash-link" href="#validatedescriptor--object" title="Direct link to heading">#</a></h3><p>This function is async so it has to be used with <code>await</code> keyword or as a
<code>Promise</code>.</p><p><strong>Returns</strong>: <code>Object</code> - returns <code>{valid, errors}</code> object</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>descriptor</td><td><code>string</code></td><td><code>Object</code></td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="infersource-headers-options--object"></a>infer(source, headers, options) â‡’ <code>Object</code><a class="hash-link" href="#infersource-headers-options--object" title="Direct link to heading">#</a></h3><p>This function is async so it has to be used with <code>await</code> keyword or as a
<code>Promise</code>.</p><p><strong>Returns</strong>: <code>Object</code> - returns schema descriptor <strong>Throws</strong>:</p><ul><li><code>TableSchemaError</code> raises any error occured in the
process</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>source</td><td><code>string</code></td><td><code>List.\&lt;List\&gt;</code></td></tr><tr><td>headers</td><td><code>List.\&lt;string\&gt;</code></td><td>list of headers</td></tr><tr><td>options</td><td><code>Object</code></td><td>any <code>Table.load</code> options</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="contributing"></a>Contributing<a class="hash-link" href="#contributing" title="Direct link to heading">#</a></h2><p>The project follows the <a href="https://github.com/okfn/coding-standards" target="_blank" rel="noopener noreferrer">Open Knowledge International coding
standards</a>. There are common
commands to work with the project.Recommended way to get started is to
create, activate and load the library environment. To install package
and development dependencies into active environment:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">devtools::install_github(&quot;frictionlessdata/tableschema-r&quot;, dependencies = TRUE)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>To make test:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">test_that(description, {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  expect_equal(test, expected result)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">})</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>To run tests:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI r"><div tabindex="0" class="prism-code language-r codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">devtools::test()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>More detailed information about how to create and run tests you can find
in <a href="https://github.com/hadley/testthat" target="_blank" rel="noopener noreferrer">testthat package</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="changelog---news"></a>Changelog - News<a class="hash-link" href="#changelog---news" title="Direct link to heading">#</a></h2><p>In
<a href="https://github.com/frictionlessdata/tableschema-r/blob/master/NEWS.md" target="_blank" rel="noopener noreferrer">NEWS.md</a>
described only breaking and the most important changes. The full
changelog could be found in nicely formatted
<a href="https://github.com/frictionlessdata/tableschema-r/commits/master" target="_blank" rel="noopener noreferrer">commit</a>
history.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/frictionlessdata/libraries/edit/master/docs/docs/table-schema/rlang.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2022-03-21T10:04:37.000Z" class="lastUpdatedDate_nN9m">3/21/2022</time> by <strong>roll</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/table-schema/go"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« tableschema-go</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/table-schema/julia"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">tableschema-jl Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#description" class="table-of-contents__link">Description</a></li><li><a href="#features" class="table-of-contents__link">Features</a></li><li><a href="#getting-started" class="table-of-contents__link">Getting started</a><ul><li><a href="#installation" class="table-of-contents__link">Installation</a></li><li><a href="#load-library" class="table-of-contents__link">Load library</a></li></ul></li><li><a href="#documentation" class="table-of-contents__link">Documentation</a><ul><li><a href="#working-with-table" class="table-of-contents__link">Working with Table</a></li></ul></li><li><a href="#working-with-schema" class="table-of-contents__link">Working with Schema</a><ul><li><a href="#working-with-field" class="table-of-contents__link">Working with Field</a></li></ul></li><li><a href="#api-reference" class="table-of-contents__link">API Reference</a><ul><li><a href="#table" class="table-of-contents__link">Table</a></li><li><a href="#schema" class="table-of-contents__link">Schema</a></li><li><a href="#field" class="table-of-contents__link">Field</a></li><li><a href="#validatedescriptor--object" class="table-of-contents__link">validate(descriptor) â‡’ <code>Object</code></a></li><li><a href="#infersource-headers-options--object" class="table-of-contents__link">infer(source, headers, options) â‡’ <code>Object</code></a></li></ul></li><li><a href="#contributing" class="table-of-contents__link">Contributing</a></li><li><a href="#changelog---news" class="table-of-contents__link">Changelog - News</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/table-schema/python">Table Schema</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/data-package/python">Data Package</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/other-libraries/frictionless-ckan-mapper">Other Libraries</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://frictionlessdata.io/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/frictionlessdata/project/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum</a></li><li class="footer__item"><a href="https://discordapp.com/invite/Sewv6av" target="_blank" rel="noopener noreferrer" class="footer__link-item">Chat</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/frictionlessdata/frictionless-py" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/frictionlessd8a" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://okfn.org" target="_blank" rel="noopener noreferrer" class="footerLogoLink_SRtH"><img src="https://a.okfn.org/img/oki/landscape-white-468x122.png" alt="Open Knowledge Foundation" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="https://a.okfn.org/img/oki/landscape-white-468x122.png" alt="Open Knowledge Foundation" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></a></div><div class="footer__copyright">Copyright Â© 2022 Frictionless Data</div></div></div></footer></div>
<script src="/assets/js/styles.761551f3.js"></script>
<script src="/assets/js/runtime~main.5a13008f.js"></script>
<script src="/assets/js/main.8e68a39e.js"></script>
<script src="/assets/js/1.b0b6591a.js"></script>
<script src="/assets/js/2.6cabec78.js"></script>
<script src="/assets/js/36.07a921c2.js"></script>
<script src="/assets/js/935f2afb.6f1dff16.js"></script>
<script src="/assets/js/17896441.3a19c907.js"></script>
<script src="/assets/js/2238bdc3.3968d0d1.js"></script>
</body>
</html>