<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Frictionless Libraries Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Frictionless Libraries Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WY2G1YK3M9"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-WY2G1YK3M9",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Frictionless Libraries" href="/opensearch.xml"><title data-react-helmet="true">tableschema-py | Frictionless Libraries</title><meta data-react-helmet="true" property="og:image" content="https://libraries.frictionlessdata.io/img/docusaurus.png"><meta data-react-helmet="true" name="twitter:image" content="https://libraries.frictionlessdata.io/img/docusaurus.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://libraries.frictionlessdata.io/docs/table-schema/python"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="tableschema-py | Frictionless Libraries"><meta data-react-helmet="true" name="description" content="Build"><meta data-react-helmet="true" property="og:description" content="Build"><link data-react-helmet="true" rel="shortcut icon" href="/img/logo.png"><link data-react-helmet="true" rel="canonical" href="https://libraries.frictionlessdata.io/docs/table-schema/python"><link data-react-helmet="true" rel="alternate" href="https://libraries.frictionlessdata.io/docs/table-schema/python" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://libraries.frictionlessdata.io/docs/table-schema/python" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.fd8b5c6b.css">
<link rel="preload" href="/assets/js/styles.6424709d.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.257b835e.js" as="script">
<link rel="preload" href="/assets/js/main.738beddf.js" as="script">
<link rel="preload" href="/assets/js/1.efaccf3f.js" as="script">
<link rel="preload" href="/assets/js/2.33a2edd5.js" as="script">
<link rel="preload" href="/assets/js/36.58e1f0d8.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.48ba32ae.js" as="script">
<link rel="preload" href="/assets/js/17896441.bcb4da12.js" as="script">
<link rel="preload" href="/assets/js/b08fbb2a.f0fd1caa.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_RReh"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Frictionless Libraries Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo.png" alt="Frictionless Libraries Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Frictionless Libraries</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/table-schema/python">Table Schema</a><a class="navbar__item navbar__link" href="/docs/data-package/python">Data Package</a><a class="navbar__item navbar__link" href="/docs/other-libraries/frictionless-ckan-mapper">Other Libraries</a><a class="navbar__item navbar__link" href="/docs/status">Status</a></div><div class="navbar__items navbar__items--right"><a href="https://frictionlessdata.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-mainsite-link">Back to the main site</a><a href="https://github.com/frictionlessdata/libraries" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_cxYs"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Frictionless Libraries Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo.png" alt="Frictionless Libraries Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Frictionless Libraries</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/table-schema/python">Table Schema</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/data-package/python">Data Package</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/other-libraries/frictionless-ckan-mapper">Other Libraries</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/status">Status</a></li><li class="menu__list-item"><a href="https://frictionlessdata.io/" target="_blank" rel="noopener noreferrer" class="menu__link header-mainsite-link">Back to the main site</a></li><li class="menu__list-item"><a href="https://github.com/frictionlessdata/libraries" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_lDyR"><div class="docSidebarContainer_0YBq" role="complementary"><div class="sidebar_a3j0 sidebarWithHideableNavbar_VlPv"><a tabindex="-1" class="sidebarLogo_hmkv" href="/"><img src="/img/logo.png" alt="Frictionless Libraries Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.png" alt="Frictionless Libraries Logo" class="themedImage_TMUO themedImage--dark_uzRr"><strong>Frictionless Libraries</strong></a><div class="menu menu--responsive thin-scrollbar menu_cyFh"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_iZzd" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/docs/table-schema/python">tableschema-py</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/javascript">tableschema-js</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/ruby">tableschema-rb</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/php">tableschema-php</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/java">tableschema-java</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/go">tableschema-go</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/rlang">tableschema-r</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/julia">tableschema-jl</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/swift">tableschema-swift</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/clojure">tableschema-clj</a></li></ul></div></div></div><main class="docMainContainer_r8cw"><div class="container padding-vert--lg docItemWrapper_NJLN"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><header><h1 class="docTitle_-X99">tableschema-py</h1></header><div class="markdown"><p><a href="https://github.com/frictionlessdata/tableschema-py/actions" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/github/workflow/status/frictionlessdata/tableschema-py/general/main" alt="Build"></a>
<a href="https://coveralls.io/r/frictionlessdata/tableschema-py?branch=master" target="_blank" rel="noopener noreferrer"><img src="http://img.shields.io/coveralls/frictionlessdata/tableschema-py.svg?branch=master" alt="Coverage"></a>
<a href="https://pypi.python.org/pypi/tableschema" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/pypi/v/tableschema.svg" alt="Release"></a>
<a href="https://github.com/frictionlessdata/tableschema-py" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/codebase-github-brightgreen" alt="Codebase"></a>
<a href="https://discord.com/channels/695635777199145130/695635777199145133" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/support-discord-brightgreen" alt="Support"></a></p><p>A Python implementation of the <a href="http://specs.frictionlessdata.io/table-schema/" target="_blank" rel="noopener noreferrer">Table Schema</a> standard.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="features"></a>Features<a class="hash-link" href="#features" title="Direct link to heading">#</a></h2><ul><li><code>Table</code> to work with data tables described by Table Schema</li><li><code>Schema</code> representing Table Schema</li><li><code>Field</code> representing Table Schema field</li><li><code>validate</code> to validate Table Schema</li><li><code>infer</code> to infer Table Schema from data</li><li>built-in command-line interface to validate and infer schemas</li><li>storage/plugins system to connect tables to different storage backends like SQL Database</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="contents"></a>Contents<a class="hash-link" href="#contents" title="Direct link to heading">#</a></h2><ul><li><a href="#getting-started">Getting Started</a><ul><li><a href="#installation">Installation</a></li></ul></li><li><a href="#documentation">Documentation</a><ul><li><a href="#introduction">Introduction</a></li><li><a href="#working-with-table">Working with Table</a></li><li><a href="#working-with-schema">Working with Schema</a></li><li><a href="#working-with-field">Working with Field</a></li></ul></li><li><a href="#api-reference">API Reference</a><ul><li><a href="#cli"><code>cli</code></a></li><li><a href="#table"><code>Table</code></a></li><li><a href="#schema"><code>Schema</code></a></li><li><a href="#field"><code>Field</code></a></li><li><a href="#storage"><code>Storage</code></a></li><li><a href="#validate"><code>validate</code></a></li><li><a href="#infer"><code>infer</code></a></li><li><a href="#failedcast"><code>FailedCast</code></a></li><li><a href="#datapackageexception"><code>DataPackageException</code></a></li><li><a href="#tableschemaexception"><code>TableSchemaException</code></a></li><li><a href="#loaderror"><code>LoadError</code></a></li><li><a href="#validationerror"><code>ValidationError</code></a></li><li><a href="#casterror"><code>CastError</code></a></li><li><a href="#integrityerror"><code>IntegrityError</code></a></li><li><a href="#uniquekeyerror"><code>UniqueKeyError</code></a></li><li><a href="#relationerror"><code>RelationError</code></a></li><li><a href="#unresolvedfkerror"><code>UnresolvedFKError</code></a></li><li><a href="#storageerror"><code>StorageError</code></a></li></ul></li><li><a href="#experimental">Experimental</a></li><li><a href="#contributing">Contributing</a></li><li><a href="#changelog">Changelog</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="getting-started"></a>Getting Started<a class="hash-link" href="#getting-started" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="installation"></a>Installation<a class="hash-link" href="#installation" title="Direct link to heading">#</a></h3><p>The package uses semantic versioning. It means that major versions  could include breaking changes. It&#x27;s highly recommended to specify <code>tableschema</code> version range in your <code>setup/requirements</code> file e.g. <code>tableschema&gt;=1.0,&lt;2.0</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><div tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">$ pip </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> tableschema</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="documentation"></a>Documentation<a class="hash-link" href="#documentation" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="introduction"></a>Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">#</a></h3><p>Let&#x27;s start with a simple example:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> tableschema </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Table</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create table</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">table </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Table</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;path.csv&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> schema</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;schema.json&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Print schema descriptor</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">descriptor</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Print cast rows in a dict form</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> keyed_row </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">iter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">keyed</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">keyed_row</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="working-with-table"></a>Working with Table<a class="hash-link" href="#working-with-table" title="Direct link to heading">#</a></h3><p>A table is a core concept in a tabular data world. It represents data with metadata (Table Schema). Let&#x27;s see how we can use it in practice.</p><p>Consider we have some local csv file. It could be inline data or from a remote link - all supported by the <code>Table</code> class (except local files for in-brower usage of course). But say it&#x27;s <code>data.csv</code> for now:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI csv"><div tabindex="0" class="prism-code language-csv codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">city,location</span></div><div class="token-line" style="color:#393A34"><span class="token plain">london,&quot;51.50,-0.11&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">paris,&quot;48.85,2.30&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">rome,N/A</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Let&#x27;s create and read a table instance. We use the static <code>Table.load</code> method and the <code>table.read</code> method with the <code>keyed</code> option to get an array of keyed rows:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">table </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Table</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;data.csv&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">headers </span><span class="token comment" style="color:#999988;font-style:italic"># [&#x27;city&#x27;, &#x27;location&#x27;]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">keyed</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># [</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   {city: &#x27;london&#x27;, location: &#x27;51.50,-0.11&#x27;},</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   {city: &#x27;paris&#x27;, location: &#x27;48.85,2.30&#x27;},</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   {city: &#x27;rome&#x27;, location: &#x27;N/A&#x27;},</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>As we can see, our locations are just strings. But they should be geopoints. Also, Rome&#x27;s location is not available, but it&#x27;s just a string <code>N/A</code> instead of <code>None</code>. First we have to infer Table Schema:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">infer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">descriptor</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># { fields:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   [ { name: &#x27;city&#x27;, type: &#x27;string&#x27;, format: &#x27;default&#x27; },</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#     { name: &#x27;location&#x27;, type: &#x27;geopoint&#x27;, format: &#x27;default&#x27; } ],</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#  missingValues: [ &#x27;&#x27; ] }</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">keyed</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Fails with a data validation error</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Let&#x27;s fix the &quot;not available&quot; location. There is a <code>missingValues</code> property in Table Schema specification. As a first try we set <code>missingValues</code> to <code>N/A</code> in <code>table.schema.descriptor</code>. The schema descriptor can be changed in-place, but all changes should also be committed using <code>table.schema.commit()</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">descriptor</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;missingValues&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;N/A&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">commit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">valid </span><span class="token comment" style="color:#999988;font-style:italic"># false</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">errors</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># [&lt;ValidationError: &quot;&#x27;N/A&#x27; is not of type &#x27;array&#x27;&quot;&gt;]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>As a good citizens we&#x27;ve decided to check our schema descriptor&#x27;s validity. And it&#x27;s not valid! We should use an array for the <code>missingValues</code> property. Also, don&#x27;t forget to include &quot;empty string&quot; as a valid missing value:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">descriptor</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;missingValues&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;N/A&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">commit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">valid </span><span class="token comment" style="color:#999988;font-style:italic"># true</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>All good. It looks like we&#x27;re ready to read our data again:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">keyed</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># [</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   {city: &#x27;london&#x27;, location: [51.50,-0.11]},</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   {city: &#x27;paris&#x27;, location: [48.85,2.30]},</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   {city: &#x27;rome&#x27;, location: null},</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Now we see that:</p><ul><li>locations are arrays with numeric latitude and longitude</li><li>Rome&#x27;s location is a native Python <code>None</code></li></ul><p>And because there are no errors after reading, we can be sure that our data is valid against our schema. Let&#x27;s save it:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;schema.json&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;data.csv&#x27;</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Our <code>data.csv</code> looks the same because it has been stringified back to <code>csv</code> format. But now we have <code>schema.json</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI json"><div tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;fields&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;city&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;string&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;format&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;default&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;location&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;geopoint&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;format&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;default&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;missingValues&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;N/A&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>If we decide to improve it even more we could update the schema file and then open it again. But now providing a schema path:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">table </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Table</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;data.csv&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> schema</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;schema.json&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Continue the work</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>As already mentioned a given schema can be used to <em>validate</em> data (see the <a href="#schema">Schema</a> section for schema specification details). In default mode invalid data rows immediately trigger an <a href="#exceptions">exception</a> in the <code>table.iter()</code>/<code>table.write()</code> methods.</p><p>Suppose this schema-invalid local file <code>invalid_data.csv</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI csv"><div tabindex="0" class="prism-code language-csv codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">key,value</span></div><div class="token-line" style="color:#393A34"><span class="token plain">zero,0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">one,not_an_integer</span></div><div class="token-line" style="color:#393A34"><span class="token plain">two,2</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>We&#x27;re going to validate the data against the following schema:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">table </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Table</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;invalid_data.csv&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    schema</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;fields&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;name&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;key&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;name&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;value&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;type&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;integer&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Iterating over the data triggers an exception due to the failed cast of <code>&#x27;not_an_integer&#x27;</code> to <code>int</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> row </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">iter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">row</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Traceback (most recent call last):</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># tableschema.exceptions.CastError: There are 1 cast errors (see exception.errors) for row &quot;3&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Hint: The row number count starts with 1 and also includes header lines.</p><p>(Note: You can optionally switch off <code>iter()</code>/<code>read()</code> value casting using the cast parameter, see reference below.)</p><p>By providing a custom exception handler (a callable) to those methods you can treat occurring exceptions at your own discretion, i.e. to &quot;fail late&quot; and e.g. gather a validation report on the whole data:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">errors </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">exc_handler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">exc</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> row_number</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> row_data</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error_data</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    errors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">exc</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> row_number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> row_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error_data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> row </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">iter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">exc_handler</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">exc_handler</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">row</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># [&#x27;zero&#x27;, 0]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># [&#x27;one&#x27;, FailedCast(&#x27;not_an_integer&#x27;)]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># [&#x27;two&#x27;, 2]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">errors</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># [(CastError(&#x27;There are 1 cast errors (see exception.errors) for row &quot;3&quot;&#x27;,),</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   3,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   OrderedDict([(&#x27;key&#x27;, &#x27;one&#x27;), (&#x27;value&#x27;, &#x27;not_an_integer&#x27;)]),</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   OrderedDict([(&#x27;value&#x27;, &#x27;not_an_integer&#x27;)]))]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Note that</p><ul><li>Data rows are yielded even though the data is schema-invalid; this is due to our custom expression handler choosing not to raise exceptions (but rather collect them in the errors list).</li><li>Data field values that can&#x27;t get casted properly (if <code>iter()</code>/<code>read()</code> cast parameter is set to True, which is the default) are wrapped into a <code>FailedCast</code> &quot;value holder&quot;. This allows for distinguishing uncasted values from successfully casted values on the data consumer side. <code>FailedCast</code> instances can only get yielded when custom exception handling is in place.</li><li>The custom exception handler callable must support a function signature as specified in the <code>iter()</code>/<code>read()</code> sections of the <code>Table</code> class API reference.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="working-with-schema"></a>Working with Schema<a class="hash-link" href="#working-with-schema" title="Direct link to heading">#</a></h3><p>A model of a schema with helpful methods for working with the schema and supported data. Schema instances can be initialized with a schema source as a url to a JSON file or a JSON object. The schema is initially validated (see <a href="#validate">validate</a> below). By default validation errors will be stored in <code>schema.errors</code> but in a strict mode it will be instantly raised.</p><p>Let&#x27;s create a blank schema. It&#x27;s not valid because <code>descriptor.fields</code> property is required by the <a href="http://specs.frictionlessdata.io/table-schema/" target="_blank" rel="noopener noreferrer">Table Schema</a> specification:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Schema</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">valid </span><span class="token comment" style="color:#999988;font-style:italic"># false</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">errors</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># [&lt;ValidationError: &quot;&#x27;fields&#x27; is a required property&quot;&gt;]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>To avoid creating a schema descriptor by hand we will use a <code>schema.infer</code> method to infer the descriptor from given data:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">infer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;age&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;name&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;39&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;Paul&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;2&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;23&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;Jimmy&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;3&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;36&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;Jane&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;4&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;28&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;Judy&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">valid </span><span class="token comment" style="color:#999988;font-style:italic"># true</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">descriptor</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#{ fields:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   [ { name: &#x27;id&#x27;, type: &#x27;integer&#x27;, format: &#x27;default&#x27; },</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#     { name: &#x27;age&#x27;, type: &#x27;integer&#x27;, format: &#x27;default&#x27; },</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#     { name: &#x27;name&#x27;, type: &#x27;string&#x27;, format: &#x27;default&#x27; } ],</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#  missingValues: [ &#x27;&#x27; ] }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Now we have an inferred schema and it&#x27;s valid. We can cast data rows against our schema. We provide a string input which will be cast correspondingly:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cast_row</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;5&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;66&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Sam&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># [ 5, 66, &#x27;Sam&#x27; ]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>But if we try provide some missing value to the <code>age</code> field, the cast will fail because the only valid &quot;missing&quot; value is an empty string. Let&#x27;s update our schema:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cast_row</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;6&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;N/A&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Walt&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Cast error</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">descriptor</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;missingValues&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;N/A&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">commit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cast_row</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;6&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;N/A&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Walt&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># [ 6, None, &#x27;Walt&#x27; ]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>We can save the schema to a local file, and resume work on it at any time by loading it from that file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;schema.json&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Schema</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;schema.json&#x27;</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="working-with-field"></a>Working with Field<a class="hash-link" href="#working-with-field" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> tableschema </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Field</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Init field</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">field </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;name&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;name&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;type&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;number&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Cast a value</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">field</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cast_value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;12345&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># -&gt; 12345</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Data values can be cast to native Python objects with a Field instance. Type instances can be initialized with <a href="https://specs.frictionlessdata.io/table-schema/" target="_blank" rel="noopener noreferrer">field descriptors</a>. This allows formats and constraints to be defined.</p><p>Casting a value will check the value is of the expected type, is in the correct format, and complies with any constraints imposed by a schema. E.g. a date value (in ISO 8601 format) can be cast with a DateType instance. Values that can&#x27;t be cast will raise an <code>InvalidCastError</code> exception.</p><p>Casting a value that doesn&#x27;t meet the constraints will raise a <code>ConstraintError</code> exception.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="api-reference"></a>API Reference<a class="hash-link" href="#api-reference" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="cli"></a><code>cli</code><a class="hash-link" href="#cli" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">cli</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Command-line interface</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Usage: tableschema [OPTIONS] COMMAND [ARGS]...</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Options:</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  --help  Show this message and exit.</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Commands:</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  infer     Infer a schema from data.</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  info      Return info on this version of Table Schema</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  validate  Validate that a supposed schema is in fact a Table Schema.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="table"></a><code>Table</code><a class="hash-link" href="#table" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Table</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      source</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      schema</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      strict</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      post_cast</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      storage</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">**</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Table representation</p><p><strong>Arguments</strong></p><ul><li><strong>source (str/list[])</strong>: data source one of:<ul><li>local file (path)</li><li>remote file (url)</li><li>array of arrays representing the rows</li></ul></li><li><strong>schema (any)</strong>: data schema in all forms supported by <code>Schema</code> class</li><li><strong>strict (bool)</strong>: strictness option to pass to <code>Schema</code> constructor</li><li><strong>post_cast (function[])</strong>: list of post cast processors</li><li><strong>storage (None)</strong>: storage name like <code>sql</code> or <code>bigquery</code></li><li><strong>options (dict)</strong>: <code>tabulator</code> or storage&#x27;s options</li></ul><p><strong>Raises</strong></p><ul><li><code>TableSchemaException</code>: raises on any error</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="tablehash"></a><code>table.hash</code><a class="hash-link" href="#tablehash" title="Direct link to heading">#</a></h4><p>Table&#x27;s SHA256 hash if it&#x27;s available.</p><p>If it&#x27;s already read using e.g. <code>table.read</code>, otherwise returns <code>None</code>.
In the middle of an iteration it returns hash of already read contents</p><p><strong>Returns</strong></p><p><code>str/None</code>: SHA256 hash</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="tableheaders"></a><code>table.headers</code><a class="hash-link" href="#tableheaders" title="Direct link to heading">#</a></h4><p>Table&#x27;s headers is available</p><p><strong>Returns</strong></p><p><code>str[]</code>: headers</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="tableschema"></a><code>table.schema</code><a class="hash-link" href="#tableschema" title="Direct link to heading">#</a></h4><p>Returns schema class instance if available</p><p><strong>Returns</strong></p><p><code>Schema</code>: schema</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="tablesize"></a><code>table.size</code><a class="hash-link" href="#tablesize" title="Direct link to heading">#</a></h4><p>Table&#x27;s size in BYTES if it&#x27;s available</p><p>If it&#x27;s already read using e.g. <code>table.read</code>, otherwise returns <code>None</code>.
In the middle of an iteration it returns size of already read contents</p><p><strong>Returns</strong></p><p><code>int/None</code>: size in BYTES</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="tableiter"></a><code>table.iter</code><a class="hash-link" href="#tableiter" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">iter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">keyed</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">           extended</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">           cast</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">           integrity</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">           relations</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">           foreign_keys_values</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">           exc_handler</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Iterates through the table data and emits rows cast based on table schema.</p><p><strong>Arguments</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">keyed (bool):</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    yield keyed rows in a form of `{header1: value1, header2: value2}`</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    (default is false; the form of rows is `[value1, value2]`)</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">extended (bool):</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    yield extended rows in a for of `[rowNumber, [header1, header2], [value1, value2]]`</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    (default is false; the form of rows is `[value1, value2]`)</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">cast (bool):</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    disable data casting if false</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    (default is true)</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">integrity (dict):</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    dictionary in a form of `{&#x27;size&#x27;: &lt;bytes&gt;, &#x27;hash&#x27;: &#x27;&lt;sha256&gt;&#x27;}`</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    to check integrity of the table when it&#x27;s read completely.</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    Both keys are optional.</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">relations (dict):</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    dictionary of foreign key references in a form</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    of `{resource1: [{field1: value1, field2: value2}, ...], ...}`.</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    If provided, foreign key fields will checked and resolved</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    to one of their references (/!\ one-to-many fk are not completely resolved).</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">foreign_keys_values (dict):</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    three-level dictionary of foreign key references optimized</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    to speed up validation process in a form of</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    `{resource1: {(fk_field1, fk_field2): {(value1, value2): {one_keyedrow}, ... }}}`.</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    If not provided but relations is true, it will be created</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    before the validation process by *index_foreign_keys_values* method</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">exc_handler (func):</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    optional custom exception handler callable.</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    Can be used to defer raising errors (i.e. &quot;fail late&quot;), e.g.</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    for data validation purposes. Must support the signature below</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p><strong>Custom exception handler</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">exc_handler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">exc</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> row_number</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> row_data</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error_data</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&#x27;&#x27;&#x27;Custom exception handler (example)</span></div><div class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c">
</span></div><div class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    # Arguments:</span></div><div class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        exc(Exception):</span></div><div class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            Deferred exception instance</span></div><div class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        row_number(int):</span></div><div class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            Data row number that triggers exception exc</span></div><div class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        row_data(OrderedDict):</span></div><div class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            Invalid data row source data</span></div><div class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        error_data(OrderedDict):</span></div><div class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            Data row source data field subset responsible for the error, if</span></div><div class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            applicable (e.g. invalid primary or foreign key fields). May be</span></div><div class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">            identical to row_data.</span></div><div class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    &#x27;&#x27;&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p><strong>Raises</strong></p><ul><li><code>TableSchemaException</code>: base class of any error</li><li><code>CastError</code>: data cast error</li><li><code>IntegrityError</code>: integrity checking error</li><li><code>UniqueKeyError</code>: unique key constraint violation</li><li><code>UnresolvedFKError</code>: unresolved foreign key reference error</li></ul><p><strong>Returns</strong></p><p><code>Iterator[list]</code>: yields rows</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="tableread"></a><code>table.read</code><a class="hash-link" href="#tableread" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">keyed</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">           extended</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">           cast</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">           limit</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">           integrity</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">           relations</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">           foreign_keys_values</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">           exc_handler</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Read the whole table and return as array of rows</p><blockquote><p>It has the same API as <code>table.iter</code> except for</p></blockquote><p><strong>Arguments</strong></p><ul><li><strong>limit (int)</strong>: limit count of rows to read and return</li></ul><p><strong>Returns</strong></p><p><code>list[]</code>: returns rows</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="tableinfer"></a><code>table.infer</code><a class="hash-link" href="#tableinfer" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">infer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">limit</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            confidence</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.75</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            missing_values</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            guesser_cls</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            resolver_cls</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Infer a schema for the table.</p><p>It will infer and set Table Schema to <code>table.schema</code> based on table data.</p><p><strong>Arguments</strong></p><ul><li><strong>limit (int)</strong>: limit rows sample size</li><li><strong>confidence (float)</strong>: how many casting errors are allowed (as a ratio, between 0 and 1)</li><li><strong>missing_values (str[])</strong>: list of missing values (by default <code>[&#x27;&#x27;]</code>)</li><li><strong>guesser_cls (class)</strong>: you can implement inferring strategies by
providing type-guessing and type-resolving classes [experimental]</li><li><strong>resolver_cls (class)</strong>: you can implement inferring strategies by
providing type-guessing and type-resolving classes [experimental]</li></ul><p><strong>Returns</strong></p><p><code>dict</code>: Table Schema descriptor</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="tablesave"></a><code>table.save</code><a class="hash-link" href="#tablesave" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">target</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> storage</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">**</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Save data source to file locally in CSV format with <code>,</code> (comma) delimiter</p><blockquote><p>To save schema use <code>table.schema.save()</code></p></blockquote><p><strong>Arguments</strong></p><ul><li><strong>target (str)</strong>: saving target (e.g. file path)</li><li><strong>storage (None/str)</strong>: storage name like <code>sql</code> or <code>bigquery</code></li><li><strong>options (dict)</strong>: <code>tabulator</code> or storage options</li></ul><p><strong>Raises</strong></p><ul><li><code>TableSchemaException</code>: raises an error if there is saving problem</li></ul><p><strong>Returns</strong></p><p><code>True/Storage</code>: returns true or storage instance</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="tableindex_foreign_keys_values"></a><code>table.index_foreign_keys_values</code><a class="hash-link" href="#tableindex_foreign_keys_values" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">index_foreign_keys_values</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">relations</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Creates a three-level dictionary of foreign key references</p><p>We create them optimized to speed up validation process in a form of
<code>{resource1: {(fk_field1, fk_field2): {(value1, value2): {one_keyedrow}, ... }}}</code>.</p><p>For each foreign key of the schema it will iterate through the corresponding
<code>relations[&#x27;resource&#x27;]</code> to create an index (i.e. a dict) of existing values
for the foreign fields and store on keyed row for each value combination.</p><p>The optimization relies on the indexation of possible values for one foreign key
in a hashmap to later speed up resolution.</p><p>This method is public to allow creating the index once to apply it
on multiple tables charing the same schema
(typically <a href="https://github.com/frictionlessdata/datapackage-py#group" target="_blank" rel="noopener noreferrer">grouped resources in datapackage</a>)</p><p><strong>Notes</strong></p><ul><li>the second key of the output is a tuple of the foreign fields,
a proxy identifier of the foreign key</li><li>the same relation resource can be indexed multiple times
as a schema can contain more than one Foreign Keys
pointing to the same resource</li></ul><p><strong>Arguments</strong></p><ul><li><strong>relations (dict)</strong>:
dict of foreign key references in a form of
<code>{resource1: [{field1: value1, field2: value2}, ...], ...}</code>.
It must contain all resources pointed in the foreign keys schema definition.</li></ul><p><strong>Returns</strong></p><p><code>dict</code>:
returns a three-level dictionary of foreign key references
optimized to speed up validation process in a form of
<code>{resource1: {(fk_field1, fk_field2): {(value1, value2): {one_keyedrow}, ... }}})</code></p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="schema"></a><code>Schema</code><a class="hash-link" href="#schema" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Schema</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> descriptor</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> strict</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Schema representation</p><p><strong>Arguments</strong></p><ul><li><strong>descriptor (str/dict)</strong>: schema descriptor one of:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">  - local path</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  - remote url</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  - dictionary</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div></li><li><strong>strict (bool)</strong>: flag to specify validation behaviour:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">  - if false, errors will not be raised but instead collected in `schema.errors`</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  - if true, validation errors are raised immediately</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div></li></ul><p><strong>Raises</strong></p><ul><li><code>TableSchemaException</code>: raise any error that occurs during the process</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemadescriptor"></a><code>schema.descriptor</code><a class="hash-link" href="#schemadescriptor" title="Direct link to heading">#</a></h4><p>Schema&#x27;s descriptor</p><p><strong>Returns</strong></p><p><code>dict</code>: descriptor</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemaerrors"></a><code>schema.errors</code><a class="hash-link" href="#schemaerrors" title="Direct link to heading">#</a></h4><p>Validation errors</p><p>Always empty in strict mode.</p><p><strong>Returns</strong></p><p><code>Exception[]</code>: validation errors</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemafield_names"></a><code>schema.field_names</code><a class="hash-link" href="#schemafield_names" title="Direct link to heading">#</a></h4><p>Schema&#x27;s field names</p><p><strong>Returns</strong></p><p><code>str[]</code>: an array of field names</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemafields"></a><code>schema.fields</code><a class="hash-link" href="#schemafields" title="Direct link to heading">#</a></h4><p>Schema&#x27;s fields</p><p><strong>Returns</strong></p><p><code>Field[]</code>: an array of field instances</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemaforeign_keys"></a><code>schema.foreign_keys</code><a class="hash-link" href="#schemaforeign_keys" title="Direct link to heading">#</a></h4><p>Schema&#x27;s foreign keys</p><p><strong>Returns</strong></p><p><code>dict[]</code>: foreign keys</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemaheaders"></a><code>schema.headers</code><a class="hash-link" href="#schemaheaders" title="Direct link to heading">#</a></h4><p>Schema&#x27;s field names</p><p><strong>Returns</strong></p><p><code>str[]</code>: an array of field names</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemamissing_values"></a><code>schema.missing_values</code><a class="hash-link" href="#schemamissing_values" title="Direct link to heading">#</a></h4><p>Schema&#x27;s missing values</p><p><strong>Returns</strong></p><p><code>str[]</code>: missing values</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemaprimary_key"></a><code>schema.primary_key</code><a class="hash-link" href="#schemaprimary_key" title="Direct link to heading">#</a></h4><p>Schema&#x27;s primary keys</p><p><strong>Returns</strong></p><p><code>str[]</code>: primary keys</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemavalid"></a><code>schema.valid</code><a class="hash-link" href="#schemavalid" title="Direct link to heading">#</a></h4><p>Validation status</p><p>Always true in strict mode.</p><p><strong>Returns</strong></p><p><code>bool</code>: validation status</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemaget_field"></a><code>schema.get_field</code><a class="hash-link" href="#schemaget_field" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Get schema&#x27;s field by name.</p><blockquote><p>Use <code>table.update_field</code> if you want to modify the field descriptor</p></blockquote><p><strong>Arguments</strong></p><ul><li><strong>name (str)</strong>: schema field name</li></ul><p><strong>Returns</strong></p><p><code>Field/None</code>: <code>Field</code> instance or <code>None</code> if not found</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemaget_field-1"></a><code>schema.get_field</code><a class="hash-link" href="#schemaget_field-1" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Get schema&#x27;s field by name.</p><blockquote><p>Use <code>table.update_field</code> if you want to modify the field descriptor</p></blockquote><p><strong>Arguments</strong></p><ul><li><strong>name (str)</strong>: schema field name</li></ul><p><strong>Returns</strong></p><p><code>Field/None</code>: <code>Field</code> instance or <code>None</code> if not found</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemaadd_field"></a><code>schema.add_field</code><a class="hash-link" href="#schemaadd_field" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">descriptor</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Add new field to schema.</p><p>The schema descriptor will be validated with newly added field descriptor.</p><p><strong>Arguments</strong></p><ul><li><strong>descriptor (dict)</strong>: field descriptor</li></ul><p><strong>Raises</strong></p><ul><li><code>TableSchemaException</code>: raises any error that occurs during the process</li></ul><p><strong>Returns</strong></p><p><code>Field/None</code>: added <code>Field</code> instance or <code>None</code> if not added</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemaupdate_field"></a><code>schema.update_field</code><a class="hash-link" href="#schemaupdate_field" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">update_field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> update</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Update existing descriptor field by name</p><p><strong>Arguments</strong></p><ul><li><strong>name (str)</strong>: schema field name</li><li><strong>update (dict)</strong>: update to apply to field&#x27;s descriptor</li></ul><p><strong>Returns</strong></p><p><code>bool</code>: true on success and false if no field is found to be modified</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemaremove_field"></a><code>schema.remove_field</code><a class="hash-link" href="#schemaremove_field" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">remove_field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Remove field resource by name.</p><p>The schema descriptor will be validated after field descriptor removal.</p><p><strong>Arguments</strong></p><ul><li><strong>name (str)</strong>: schema field name</li></ul><p><strong>Raises</strong></p><ul><li><code>TableSchemaException</code>: raises any error that occurs during the process</li></ul><p><strong>Returns</strong></p><p><code>Field/None</code>: removed <code>Field</code> instances or <code>None</code> if not found</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemacast_row"></a><code>schema.cast_row</code><a class="hash-link" href="#schemacast_row" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cast_row</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">row</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fail_fast</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> row_number</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> exc_handler</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Cast row based on field types and formats.</p><p><strong>Arguments</strong></p><ul><li><strong>row (any[]</strong>: data row as an array of values</li></ul><p><strong>Returns</strong></p><p><code>any[]</code>: returns cast data row</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemainfer"></a><code>schema.infer</code><a class="hash-link" href="#schemainfer" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">infer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rows</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">             headers</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">             confidence</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.75</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">             guesser_cls</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">             resolver_cls</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Infer and set <code>schema.descriptor</code> based on data sample.</p><p><strong>Arguments</strong></p><ul><li><strong>rows (list[])</strong>: array of arrays representing rows.</li><li><strong>headers (int/str[])</strong>: data sample headers (one of):<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">- row number containing headers (`rows` should contain headers rows)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">- array of headers (`rows` should NOT contain headers rows)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div></li><li><strong>confidence (float)</strong>: how many casting errors are allowed (as a ratio, between 0 and 1)</li><li><strong>guesser_cls (class)</strong>: you can implement inferring strategies by
providing type-guessing and type-resolving classes [experimental]</li><li><strong>resolver_cls (class)</strong>: you can implement inferring strategies by
providing type-guessing and type-resolving classes [experimental]</li></ul><p><strong>Returns</strong></p><p><code>dict</code>: Table Schema descriptor</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemacommit"></a><code>schema.commit</code><a class="hash-link" href="#schemacommit" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">commit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">strict</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Update schema instance if there are in-place changes in the descriptor.</p><p><strong>Example</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> tableschema </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Schema</span></div><div class="token-line" style="color:#393A34"><span class="token plain">descriptor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;fields&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;name&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;my_field&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;title&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;My Field&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;type&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;string&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Schema</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">descriptor</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;my_field&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">descriptor</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;type&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># string</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Update descriptor by field position</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">descriptor</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;fields&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;type&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;number&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Update descriptor by field name</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">update_field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;my_field&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;title&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;My Pretty Field&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># True</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Change are not committed</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;my_field&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">descriptor</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;type&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># string</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;my_field&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">descriptor</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;title&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># My Field</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Commit change</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">commit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;my_field&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">descriptor</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;type&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># number</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;my_field&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">descriptor</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;title&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># My Pretty Field</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p><strong>Arguments</strong></p><ul><li><strong>strict (bool)</strong>: alter <code>strict</code> mode for further work</li></ul><p><strong>Raises</strong></p><ul><li><code>TableSchemaException</code>: raises any error that occurs during the process</li></ul><p><strong>Returns</strong></p><p><code>bool</code>: true on success and false if not modified</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemasave"></a><code>schema.save</code><a class="hash-link" href="#schemasave" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">target</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ensure_ascii</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Save schema descriptor to target destination.</p><p><strong>Arguments</strong></p><ul><li><strong>target (str)</strong>: path where to save a descriptor</li></ul><p><strong>Raises</strong></p><ul><li><code>TableSchemaException</code>: raises any error that occurs during the process</li></ul><p><strong>Returns</strong></p><p><code>bool</code>: true on success</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="field"></a><code>Field</code><a class="hash-link" href="#field" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> descriptor</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> missing_values</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> schema</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Field representaion</p><p><strong>Arguments</strong></p><ul><li><strong>descriptor (dict)</strong>: schema field descriptor</li><li><strong>missingValues (str[])</strong>: an array with string representing missing values</li></ul><p><strong>Raises</strong></p><ul><li><code>TableSchemaException</code>: raises any error that occurs during the process</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fieldconstraints"></a><code>field.constraints</code><a class="hash-link" href="#fieldconstraints" title="Direct link to heading">#</a></h4><p>Field constraints</p><p><strong>Returns</strong></p><p><code>dict</code>: dict of field constraints</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fielddescriptor"></a><code>field.descriptor</code><a class="hash-link" href="#fielddescriptor" title="Direct link to heading">#</a></h4><p>Fields&#x27;s descriptor</p><p><strong>Returns</strong></p><p><code>dict</code>: descriptor</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fieldformat"></a><code>field.format</code><a class="hash-link" href="#fieldformat" title="Direct link to heading">#</a></h4><p>Field format</p><p><strong>Returns</strong></p><p><code>str</code>: field format</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fieldmissing_values"></a><code>field.missing_values</code><a class="hash-link" href="#fieldmissing_values" title="Direct link to heading">#</a></h4><p>Field&#x27;s missing values</p><p><strong>Returns</strong></p><p><code>str[]</code>: missing values</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fieldname"></a><code>field.name</code><a class="hash-link" href="#fieldname" title="Direct link to heading">#</a></h4><p>Field name</p><p><strong>Returns</strong></p><p><code>str</code>: field name</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fieldrequired"></a><code>field.required</code><a class="hash-link" href="#fieldrequired" title="Direct link to heading">#</a></h4><p>Whether field is required</p><p><strong>Returns</strong></p><p><code>bool</code>: true if required</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fieldschema"></a><code>field.schema</code><a class="hash-link" href="#fieldschema" title="Direct link to heading">#</a></h4><p>Returns a schema instance if the field belongs to some schema</p><p><strong>Returns</strong></p><p><code>Schema</code>: field&#x27;s schema</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fieldtype"></a><code>field.type</code><a class="hash-link" href="#fieldtype" title="Direct link to heading">#</a></h4><p>Field type</p><p><strong>Returns</strong></p><p><code>str</code>: field type</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fieldcast_value"></a><code>field.cast_value</code><a class="hash-link" href="#fieldcast_value" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">field</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cast_value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> constraints</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Cast given value according to the field type and format.</p><p><strong>Arguments</strong></p><ul><li><strong>value (any)</strong>: value to cast against field</li><li><strong>constraints (boll/str[])</strong>: gets constraints configuration<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">  - it could be set to true to disable constraint checks</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  - it could be an Array of constraints to check e.g. [&#x27;minimum&#x27;, &#x27;maximum&#x27;]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div></li></ul><p><strong>Raises</strong></p><ul><li><code>TableSchemaException</code>: raises any error that occurs during the process</li></ul><p><strong>Returns</strong></p><p><code>any</code>: returns cast value</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fieldtest_value"></a><code>field.test_value</code><a class="hash-link" href="#fieldtest_value" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">field</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">test_value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> constraints</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Test whether value is compliant to the field.</p><p><strong>Arguments</strong></p><ul><li><strong>value (any)</strong>: value to cast against field</li><li><strong>constraints (bool/str[])</strong>: constraints configuration</li></ul><p><strong>Returns</strong></p><p><code>bool</code>: returns if value is compliant to the field</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="storage"></a><code>Storage</code><a class="hash-link" href="#storage" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Storage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">**</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Storage factory/interface</p><p><strong>For users</strong></p><blockquote><p>Use <code>Storage.connect</code> to instantiate a storage</p></blockquote><p>For instantiation of concrete storage instances,
<code>tableschema.Storage</code> provides a unified factory method <code>connect</code>
(which uses the plugin system under the hood):</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># pip install tableschema_sql</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> tableschema </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Storage</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">storage </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Storage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;sql&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">**</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">storage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;bucket&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> descriptor</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">storage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;bucket&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rows</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">storage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;bucket&#x27;</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p><strong>For integrators</strong></p><p>The library includes interface declaration to implement tabular <code>Storage</code>.
This interface allow to use different data storage systems like SQL
with <code>tableschema.Table</code> class (load/save) as well as on the data package level:</p><p><img src="https://raw.githubusercontent.com/frictionlessdata/tableschema-py/master/data/storage.png" alt="Storage"></p><p>An implementor must follow <code>tableschema.Storage</code> interface
to write his own storage backend. Concrete storage backends
could include additional functionality specific to conrete storage system.
See <code>plugins</code> below to know how to integrate custom storage plugin into your workflow.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="storagebuckets"></a><code>storage.buckets</code><a class="hash-link" href="#storagebuckets" title="Direct link to heading">#</a></h4><p>Return list of storage bucket names.</p><p>A <code>bucket</code> is a special term which has almost the same meaning as <code>table</code>.
You should consider <code>bucket</code> as a <code>table</code> stored in the <code>storage</code>.</p><p><strong>Raises</strong></p><ul><li><code>exceptions.StorageError</code>: raises on any error</li></ul><p><strong>Returns</strong></p><p><code>str[]</code>: return list of bucket names</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="storageconnect"></a><code>storage.connect</code><a class="hash-link" href="#storageconnect" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">storage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">**</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Create tabular <code>storage</code> based on storage name.</p><blockquote><p>This method is statis: <code>Storage.connect()</code></p></blockquote><p><strong>Arguments</strong></p><ul><li><strong>name (str)</strong>: storage name like <code>sql</code></li><li><strong>options (dict)</strong>: concrete storage options</li></ul><p><strong>Raises</strong></p><ul><li><code>StorageError</code>: raises on any error</li></ul><p><strong>Returns</strong></p><p><code>Storage</code>: returns <code>Storage</code> instance</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="storagecreate"></a><code>storage.create</code><a class="hash-link" href="#storagecreate" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">storage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bucket</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> descriptor</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> force</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Create one/multiple buckets.</p><p><strong>Arguments</strong></p><ul><li><strong>bucket (str/list)</strong>: bucket name or list of bucket names</li><li><strong>descriptor (dict/dict[])</strong>: schema descriptor or list of descriptors</li><li><strong>force (bool)</strong>: whether to delete and re-create already existing buckets</li></ul><p><strong>Raises</strong></p><ul><li><code>exceptions.StorageError</code>: raises on any error</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="storagedelete"></a><code>storage.delete</code><a class="hash-link" href="#storagedelete" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">storage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bucket</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ignore</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Delete one/multiple/all buckets.</p><p><strong>Arguments</strong></p><ul><li><strong>bucket (str/list/None)</strong>: bucket name or list of bucket names to delete.
If <code>None</code>, all buckets will be deleted</li><li><strong>descriptor (dict/dict[])</strong>: schema descriptor or list of descriptors</li><li><strong>ignore (bool)</strong>: don&#x27;t raise an error on non-existent bucket deletion</li></ul><p><strong>Raises</strong></p><ul><li><code>exceptions.StorageError</code>: raises on any error</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="storagedescribe"></a><code>storage.describe</code><a class="hash-link" href="#storagedescribe" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">storage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">describe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bucket</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> descriptor</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Get/set bucket&#x27;s Table Schema descriptor</p><p><strong>Arguments</strong></p><ul><li><strong>bucket (str)</strong>: bucket name</li><li><strong>descriptor (dict/None)</strong>: schema descriptor to set</li></ul><p><strong>Raises</strong></p><ul><li><code>exceptions.StorageError</code>: raises on any error</li></ul><p><strong>Returns</strong></p><p><code>dict</code>: returns Table Schema descriptor</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="storageiter"></a><code>storage.iter</code><a class="hash-link" href="#storageiter" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">storage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">iter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bucket</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Return an iterator of typed values based on the schema of this bucket.</p><p><strong>Arguments</strong></p><ul><li><strong>bucket (str)</strong>: bucket name</li></ul><p><strong>Raises</strong></p><ul><li><code>exceptions.StorageError</code>: raises on any error</li></ul><p><strong>Returns</strong></p><p><code>list[]</code>: yields data rows</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="storageread"></a><code>storage.read</code><a class="hash-link" href="#storageread" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">storage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bucket</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Read typed values based on the schema of this bucket.</p><p><strong>Arguments</strong></p><ul><li><strong>bucket (str)</strong>: bucket name
<strong>Raises</strong></li><li><code>exceptions.StorageError</code>: raises on any error
<strong>Returns</strong></li></ul><p><code>list[]</code>: returns data rows</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="storagewrite"></a><code>storage.write</code><a class="hash-link" href="#storagewrite" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">storage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bucket</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rows</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>This method writes data rows into <code>storage</code>.</p><p>It should store values of unsupported types as strings internally (like csv does).</p><p><strong>Arguments</strong></p><ul><li><strong>bucket (str)</strong>: bucket name</li><li><strong>rows (list[])</strong>: data rows to write</li></ul><p><strong>Raises</strong></p><ul><li><code>exceptions.StorageError</code>: raises on any error</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="validate"></a><code>validate</code><a class="hash-link" href="#validate" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">validate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">descriptor</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Validate descriptor</p><p><strong>Arguments</strong></p><ul><li><strong>dict</strong>: descriptor</li></ul><p><strong>Raises</strong></p><ul><li><code>ValidationError</code>: on validation errors</li></ul><p><strong>Returns</strong></p><p><code>bool</code>: True</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="infer"></a><code>infer</code><a class="hash-link" href="#infer" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">infer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      headers</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      limit</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      confidence</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.75</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      missing_values</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      guesser_cls</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      resolver_cls</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">**</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Infer source schema.</p><p><strong>Arguments</strong></p><ul><li><strong>source (any)</strong>: source as path, url or inline data</li><li><strong>headers (int/str[])</strong>: headers rows number or headers list</li><li><strong>confidence (float)</strong>: how many casting errors are allowed (as a ratio, between 0 and 1)</li><li><strong>missing_values (str[])</strong>: list of missing values (by default <code>[&#x27;&#x27;]</code>)</li><li><strong>guesser_cls (class)</strong>: you can implement inferring strategies by
providing type-guessing and type-resolving classes [experimental]</li><li><strong>resolver_cls (class)</strong>: you can implement inferring strategies by
providing type-guessing and type-resolving classes [experimental]</li></ul><p><strong>Raises</strong></p><ul><li><code>TableSchemaException</code>: raises any error that occurs during the process</li></ul><p><strong>Returns</strong></p><p><code>dict</code>: returns schema descriptor</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="failedcast"></a><code>FailedCast</code><a class="hash-link" href="#failedcast" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">FailedCast</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Wrap an original data field value that failed to be properly casted.</p><p>FailedCast allows for further processing/yielding values but still be able
to distinguish uncasted values on the consuming side.</p><p>Delegates attribute access and the basic rich comparison methods to the
underlying object. Supports default user-defined classes hashability i.e.
is hashable based on object identity (not based on the wrapped value).</p><p><strong>Arguments</strong></p><ul><li><strong>value (any)</strong>: value</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="datapackageexception"></a><code>DataPackageException</code><a class="hash-link" href="#datapackageexception" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">DataPackageException</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> errors</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Base class for all DataPackage/TableSchema exceptions.</p><p>If there are multiple errors, they can be read from the exception object:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># lib action</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> DataPackageException </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> exception</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> exception</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">multiple</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> error </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> exception</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">errors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># handle error</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="datapackageexceptionerrors"></a><code>datapackageexception.errors</code><a class="hash-link" href="#datapackageexceptionerrors" title="Direct link to heading">#</a></h4><p>List of nested errors</p><p><strong>Returns</strong></p><p><code>DataPackageException[]</code>: list of nested errors</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="datapackageexceptionmultiple"></a><code>datapackageexception.multiple</code><a class="hash-link" href="#datapackageexceptionmultiple" title="Direct link to heading">#</a></h4><p>Whether it&#x27;s a nested exception</p><p><strong>Returns</strong></p><p><code>bool</code>: whether it&#x27;s a nested exception</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="tableschemaexception"></a><code>TableSchemaException</code><a class="hash-link" href="#tableschemaexception" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">TableSchemaException</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> errors</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Base class for all TableSchema exceptions.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="loaderror"></a><code>LoadError</code><a class="hash-link" href="#loaderror" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">LoadError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> errors</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>All loading errors.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="validationerror"></a><code>ValidationError</code><a class="hash-link" href="#validationerror" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">ValidationError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> errors</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>All validation errors.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="casterror"></a><code>CastError</code><a class="hash-link" href="#casterror" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">CastError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> errors</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>All value cast errors.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="integrityerror"></a><code>IntegrityError</code><a class="hash-link" href="#integrityerror" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">IntegrityError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> errors</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>All integrity errors.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="uniquekeyerror"></a><code>UniqueKeyError</code><a class="hash-link" href="#uniquekeyerror" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">UniqueKeyError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> errors</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Unique key constraint violation (CastError subclass)</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="relationerror"></a><code>RelationError</code><a class="hash-link" href="#relationerror" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">RelationError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> errors</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>All relations errors.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="unresolvedfkerror"></a><code>UnresolvedFKError</code><a class="hash-link" href="#unresolvedfkerror" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">UnresolvedFKError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> errors</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Unresolved foreign key reference error (RelationError subclass).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="storageerror"></a><code>StorageError</code><a class="hash-link" href="#storageerror" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">StorageError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> errors</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>All storage errors.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="experimental"></a>Experimental<a class="hash-link" href="#experimental" title="Direct link to heading">#</a></h2><blockquote><p>This API is experimental and can be changed/removed in the future</p></blockquote><p>There is an experimental environment variable <code>TABLESCHEMA_PRESERVE_MISSING_VALUES</code> which, if it is set, affects how data casting works.</p><p>By default, missing values are resolved to <code>None</code> values. When this flag is set, missing values are passed through as it is. For example:</p><blockquote><p>missing_values.py</p></blockquote><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><div tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> tableschema </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Field</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">field </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;type&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;number&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> missing_values</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;-&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">field</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cast_value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;3&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">field</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cast_value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;-&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Running this script in different modes:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><div tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">$ python missing_values.py</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">None</span></div><div class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token assign-left variable" style="color:#36acaa">TABLESCHEMA_PRESERVE_MISSING_VALUES</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> python missing_values.py</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>The flags affects all the library&#x27;s APIs and software built on top of <code>tableschema</code>. For example, Data Package Pipelines:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><div tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token assign-left variable" style="color:#36acaa">TABLESCHEMA_PRESERVE_MISSING_VALUES</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> dpp run ./my_pipeline</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="contributing"></a>Contributing<a class="hash-link" href="#contributing" title="Direct link to heading">#</a></h2><blockquote><p>The project follows the <a href="https://github.com/okfn/coding-standards" target="_blank" rel="noopener noreferrer">Open Knowledge International coding standards</a>.</p></blockquote><p>Recommended way to get started is to create and activate a project virtual environment.
To install package and development dependencies into active environment:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><div tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>To run tests with linting and coverage:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><div tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> </span><span class="token builtin class-name">test</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="changelog"></a>Changelog<a class="hash-link" href="#changelog" title="Direct link to heading">#</a></h2><p>Here described only breaking and the most important changes. The full changelog and documentation for all released versions can be found in the nicely formatted <a href="https://github.com/frictionlessdata/tableschema-py/commits/master" target="_blank" rel="noopener noreferrer">commit history</a>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v120"></a>v1.20<a class="hash-link" href="#v120" title="Direct link to heading">#</a></h4><ul><li>Added --json flag to the CLI (#287)</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v119"></a>v1.19<a class="hash-link" href="#v119" title="Direct link to heading">#</a></h4><ul><li>Deduplicate field names if guessing in infer</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v118"></a>v1.18<a class="hash-link" href="#v118" title="Direct link to heading">#</a></h4><ul><li>Publish <code>field.ERROR/cast_function/check_functions</code></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v117"></a>v1.17<a class="hash-link" href="#v117" title="Direct link to heading">#</a></h4><ul><li>Added <code>schema.missing_values</code> and <code>field.missing_values</code></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v116"></a>v1.16<a class="hash-link" href="#v116" title="Direct link to heading">#</a></h4><ul><li>Fixed the way we parse <code>geopoint</code>:<ul><li>as a string it can be in 3 forms (&quot;default&quot;, &quot;array&quot;, &quot;object&quot;) BUT</li><li>as native object it can only be a list/tuple</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v115"></a>v1.15<a class="hash-link" href="#v115" title="Direct link to heading">#</a></h4><ul><li>Added an experimental <code>TABLESCHEMA_PRESERVE_MISSING_VALUES</code> environment variable flag</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v114"></a>v1.14<a class="hash-link" href="#v114" title="Direct link to heading">#</a></h4><ul><li>Allow providing custom guesser and resolver to <code>table.infer</code> and <code>infer</code></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v113"></a>v1.13<a class="hash-link" href="#v113" title="Direct link to heading">#</a></h4><ul><li>Added <code>missing_values</code> argument to the <code>infer</code> function (#269)</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v112"></a>v1.12<a class="hash-link" href="#v112" title="Direct link to heading">#</a></h4><ul><li>Support optional custom exception handling for table.iter/read (#259)</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v111"></a>v1.11<a class="hash-link" href="#v111" title="Direct link to heading">#</a></h4><ul><li>Added <code>preserve_missing_values</code> parameter to <code>field.cast_value</code></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v110"></a>v1.10<a class="hash-link" href="#v110" title="Direct link to heading">#</a></h4><ul><li>Added an ability to check table&#x27;s integrity while reading</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v19"></a>v1.9<a class="hash-link" href="#v19" title="Direct link to heading">#</a></h4><ul><li>Implemented the <code>table.size</code> and <code>table.hash</code> properties</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v18"></a>v1.8<a class="hash-link" href="#v18" title="Direct link to heading">#</a></h4><ul><li>Added <code>table.index_foreign_keys_values</code> and improved foreign key checks performance</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v17"></a>v1.7<a class="hash-link" href="#v17" title="Direct link to heading">#</a></h4><ul><li>Added <code>field.schema</code> property</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v16"></a>v1.6<a class="hash-link" href="#v16" title="Direct link to heading">#</a></h4><ul><li>In <code>strict</code> mode raise an exception if there are problems in field construction</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v15"></a>v1.5<a class="hash-link" href="#v15" title="Direct link to heading">#</a></h4><ul><li>Allow providing custom guesser and resolver to schema infer</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v14"></a>v1.4<a class="hash-link" href="#v14" title="Direct link to heading">#</a></h4><ul><li>Added <code>schema.update_field</code> method</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v13"></a>v1.3<a class="hash-link" href="#v13" title="Direct link to heading">#</a></h4><ul><li>Support datetime with no time for date casting</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v12"></a>v1.2<a class="hash-link" href="#v12" title="Direct link to heading">#</a></h4><ul><li>Support floats like 1.0 for integer casting</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v11"></a>v1.1<a class="hash-link" href="#v11" title="Direct link to heading">#</a></h4><ul><li>Added the <code>confidence</code> parameter to <code>infer</code></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v10"></a>v1.0<a class="hash-link" href="#v10" title="Direct link to heading">#</a></h4><ul><li>The library has been rebased on the Frictionless Data specs v1 - <a href="https://frictionlessdata.io/specs/table-schema/" target="_blank" rel="noopener noreferrer">https://frictionlessdata.io/specs/table-schema/</a></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/frictionlessdata/libraries/edit/master/docs/docs/table-schema/python.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-12-31T10:12:01.000Z" class="lastUpdatedDate_nN9m">12/31/2021</time> by <strong>roll</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/table-schema/javascript"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">tableschema-js Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#features" class="table-of-contents__link">Features</a></li><li><a href="#contents" class="table-of-contents__link">Contents</a></li><li><a href="#getting-started" class="table-of-contents__link">Getting Started</a><ul><li><a href="#installation" class="table-of-contents__link">Installation</a></li></ul></li><li><a href="#documentation" class="table-of-contents__link">Documentation</a><ul><li><a href="#introduction" class="table-of-contents__link">Introduction</a></li><li><a href="#working-with-table" class="table-of-contents__link">Working with Table</a></li><li><a href="#working-with-schema" class="table-of-contents__link">Working with Schema</a></li><li><a href="#working-with-field" class="table-of-contents__link">Working with Field</a></li></ul></li><li><a href="#api-reference" class="table-of-contents__link">API Reference</a><ul><li><a href="#cli" class="table-of-contents__link"><code>cli</code></a></li><li><a href="#table" class="table-of-contents__link"><code>Table</code></a></li><li><a href="#schema" class="table-of-contents__link"><code>Schema</code></a></li><li><a href="#field" class="table-of-contents__link"><code>Field</code></a></li><li><a href="#storage" class="table-of-contents__link"><code>Storage</code></a></li><li><a href="#validate" class="table-of-contents__link"><code>validate</code></a></li><li><a href="#infer" class="table-of-contents__link"><code>infer</code></a></li><li><a href="#failedcast" class="table-of-contents__link"><code>FailedCast</code></a></li><li><a href="#datapackageexception" class="table-of-contents__link"><code>DataPackageException</code></a></li><li><a href="#tableschemaexception" class="table-of-contents__link"><code>TableSchemaException</code></a></li><li><a href="#loaderror" class="table-of-contents__link"><code>LoadError</code></a></li><li><a href="#validationerror" class="table-of-contents__link"><code>ValidationError</code></a></li><li><a href="#casterror" class="table-of-contents__link"><code>CastError</code></a></li><li><a href="#integrityerror" class="table-of-contents__link"><code>IntegrityError</code></a></li><li><a href="#uniquekeyerror" class="table-of-contents__link"><code>UniqueKeyError</code></a></li><li><a href="#relationerror" class="table-of-contents__link"><code>RelationError</code></a></li><li><a href="#unresolvedfkerror" class="table-of-contents__link"><code>UnresolvedFKError</code></a></li><li><a href="#storageerror" class="table-of-contents__link"><code>StorageError</code></a></li></ul></li><li><a href="#experimental" class="table-of-contents__link">Experimental</a></li><li><a href="#contributing" class="table-of-contents__link">Contributing</a></li><li><a href="#changelog" class="table-of-contents__link">Changelog</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/table-schema/python">Table Schema</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/data-package/python">Data Package</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/other-libraries/frictionless-ckan-mapper">Other Libraries</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://frictionlessdata.io/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/frictionlessdata/project/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum</a></li><li class="footer__item"><a href="https://discordapp.com/invite/Sewv6av" target="_blank" rel="noopener noreferrer" class="footer__link-item">Chat</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/frictionlessdata/frictionless-py" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/frictionlessd8a" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://okfn.org" target="_blank" rel="noopener noreferrer" class="footerLogoLink_SRtH"><img src="https://a.okfn.org/img/oki/landscape-white-468x122.png" alt="Open Knowledge Foundation" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="https://a.okfn.org/img/oki/landscape-white-468x122.png" alt="Open Knowledge Foundation" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></a></div><div class="footer__copyright">Copyright Â© 2022 Frictionless Data</div></div></div></footer></div>
<script src="/assets/js/styles.6424709d.js"></script>
<script src="/assets/js/runtime~main.257b835e.js"></script>
<script src="/assets/js/main.738beddf.js"></script>
<script src="/assets/js/1.efaccf3f.js"></script>
<script src="/assets/js/2.33a2edd5.js"></script>
<script src="/assets/js/36.58e1f0d8.js"></script>
<script src="/assets/js/935f2afb.48ba32ae.js"></script>
<script src="/assets/js/17896441.bcb4da12.js"></script>
<script src="/assets/js/b08fbb2a.f0fd1caa.js"></script>
</body>
</html>