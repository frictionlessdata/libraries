<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Frictionless Libraries Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Frictionless Libraries Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WY2G1YK3M9"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-WY2G1YK3M9",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Frictionless Libraries" href="/opensearch.xml"><title data-react-helmet="true">tableschema-js | Frictionless Libraries</title><meta data-react-helmet="true" property="og:image" content="https://libraries.frictionlessdata.io/img/docusaurus.png"><meta data-react-helmet="true" name="twitter:image" content="https://libraries.frictionlessdata.io/img/docusaurus.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://libraries.frictionlessdata.io/docs/table-schema/javascript"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="tableschema-js | Frictionless Libraries"><meta data-react-helmet="true" name="description" content="Build"><meta data-react-helmet="true" property="og:description" content="Build"><link data-react-helmet="true" rel="shortcut icon" href="/img/logo.png"><link data-react-helmet="true" rel="canonical" href="https://libraries.frictionlessdata.io/docs/table-schema/javascript"><link data-react-helmet="true" rel="alternate" href="https://libraries.frictionlessdata.io/docs/table-schema/javascript" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://libraries.frictionlessdata.io/docs/table-schema/javascript" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.fd8b5c6b.css">
<link rel="preload" href="/assets/js/styles.6424709d.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.55293567.js" as="script">
<link rel="preload" href="/assets/js/main.738beddf.js" as="script">
<link rel="preload" href="/assets/js/1.32cd4a63.js" as="script">
<link rel="preload" href="/assets/js/2.e6f44230.js" as="script">
<link rel="preload" href="/assets/js/36.f7f48e7f.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.48ba32ae.js" as="script">
<link rel="preload" href="/assets/js/17896441.bcb4da12.js" as="script">
<link rel="preload" href="/assets/js/66d8e426.4e56d055.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_RReh"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Frictionless Libraries Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo.png" alt="Frictionless Libraries Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Frictionless Libraries</strong></a><a class="navbar__item navbar__link" href="/docs/table-schema/python">Table Schema</a><a class="navbar__item navbar__link" href="/docs/data-package/python">Data Package</a><a class="navbar__item navbar__link" href="/docs/other-libraries/frictionless-ckan-mapper">Other Libraries</a><a class="navbar__item navbar__link" href="/docs/status">Status</a></div><div class="navbar__items navbar__items--right"><a href="https://frictionlessdata.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-mainsite-link">Back to the main site</a><a href="https://github.com/frictionlessdata/libraries" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_cxYs"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Frictionless Libraries Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo.png" alt="Frictionless Libraries Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Frictionless Libraries</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/python">Table Schema</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/data-package/python">Data Package</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/other-libraries/frictionless-ckan-mapper">Other Libraries</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/status">Status</a></li><li class="menu__list-item"><a href="https://frictionlessdata.io/" target="_blank" rel="noopener noreferrer" class="menu__link header-mainsite-link">Back to the main site</a></li><li class="menu__list-item"><a href="https://github.com/frictionlessdata/libraries" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_lDyR"><div class="docSidebarContainer_0YBq" role="complementary"><div class="sidebar_a3j0 sidebarWithHideableNavbar_VlPv"><a tabindex="-1" class="sidebarLogo_hmkv" href="/"><img src="/img/logo.png" alt="Frictionless Libraries Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.png" alt="Frictionless Libraries Logo" class="themedImage_TMUO themedImage--dark_uzRr"><strong>Frictionless Libraries</strong></a><div class="menu menu--responsive thin-scrollbar menu_cyFh"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_iZzd" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/python">tableschema-py</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/docs/table-schema/javascript">tableschema-js</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/ruby">tableschema-rb</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/php">tableschema-php</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/java">tableschema-java</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/go">tableschema-go</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/rlang">tableschema-r</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/julia">tableschema-jl</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/swift">tableschema-swift</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/table-schema/clojure">tableschema-clj</a></li></ul></div></div></div><main class="docMainContainer_r8cw"><div class="container padding-vert--lg docItemWrapper_NJLN"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><header><h1 class="docTitle_-X99">tableschema-js</h1></header><div class="markdown"><p><a href="https://github.com/frictionlessdata/tableschema-js/actions" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/github/workflow/status/frictionlessdata/tableschema-js/general/main" alt="Build"></a>
<a href="https://codecov.io/gh/frictionlessdata/tableschema-js" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/codecov/c/github/frictionlessdata/tableschema-js/main" alt="Coverage"></a>
<a href="https://www.npmjs.com/package/frictionless-tableschema-js" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/npm/v/frictionless-tableschema-js.svg" alt="Registry"></a>
<a href="https://github.com/frictionlessdata/tableschema-js" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/github-main-brightgreen" alt="Codebase"></a>
<a href="https://discordapp.com/invite/Sewv6av" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/support-discord-brightgreen" alt="Support"></a></p><p>A library for working with <a href="http://specs.frictionlessdata.io/table-schema/" target="_blank" rel="noopener noreferrer">Table Schema</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="features"></a>Features<a class="hash-link" href="#features" title="Direct link to heading">#</a></h2><ul><li><code>Table</code> class for working with data and schema</li><li><code>Schema</code> class for working with schemas</li><li><code>Field</code> class for working with schema fields</li><li><code>validate</code> function for validating schema descriptors</li><li><code>infer</code> function that creates a schema based on a data sample</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="contents"></a>Contents<a class="hash-link" href="#contents" title="Direct link to heading">#</a></h2><ul><li><a href="#getting-started">Getting started</a><ul><li><a href="#installation">Installation</a></li></ul></li><li><a href="#documentation">Documentation</a><ul><li><a href="#introduction">Introduction</a></li><li><a href="#working-with-table">Working with Table</a></li><li><a href="#working-with-schema">Working with Schema</a></li><li><a href="#working-with-field">Working with Field</a></li><li><a href="#working-with-validateinfer">Working with validate/infer</a></li></ul></li><li><a href="#api-reference">API Reference</a><ul><li><a href="#table">Table</a></li><li><a href="#schema">Schema</a></li><li><a href="#field">Field</a></li><li><a href="#validatedescriptor-%E2%87%92-codeobjectcode">validate(descriptor) â‡’ <code>Object</code></a></li><li><a href="#infersource-headers-options-%E2%87%92-codeobjectcode">infer(source, headers, options) â‡’ <code>Object</code></a></li><li><a href="#datapackageerror">DataPackageError</a></li><li><a href="#tableschemaerror">TableSchemaError</a></li></ul></li><li><a href="#contributing">Contributing</a></li><li><a href="#changelog">Changelog</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="getting-started"></a>Getting started<a class="hash-link" href="#getting-started" title="Direct link to heading">#</a></h2><blockquote><p>To use the library with <code>webpack</code> please replicate the <code>webpack.config.js-&gt;node</code> configuration - <a href="https://github.com/frictionlessdata/tableschema-js/blob/master/webpack.config.js" target="_blank" rel="noopener noreferrer">https://github.com/frictionlessdata/tableschema-js/blob/master/webpack.config.js</a></p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="installation"></a>Installation<a class="hash-link" href="#installation" title="Direct link to heading">#</a></h3><p>The package use semantic versioning. It means that major versions could include breaking changes. It&#x27;s highly recommended to specify <code>tableschema</code> version range in your <code>package.json</code> file e.g. <code>tabulator: ^1.0</code> which  will be added by default by <code>npm install --save</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="npm"></a>NPM<a class="hash-link" href="#npm" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><div tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> tableschema</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="cdn"></a>CDN<a class="hash-link" href="#cdn" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI html"><div tabindex="0" class="prism-code language-html codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">//unpkg.com/tableschema/dist/tableschema.min.js</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="documentation"></a>Documentation<a class="hash-link" href="#documentation" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="introduction"></a>Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">#</a></h3><p>Let&#x27;s start with a simple example for Node.js:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><div tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token maybe-class-name">Table</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;tableschema&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> table </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token maybe-class-name">Table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;data.csv&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">infer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// infer a schema</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">keyed</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// read the data</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// save the schema</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// save the data</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>And for browser:</p><blockquote><p><a href="https://jsfiddle.net/rollninja/ayngwd38/2/" target="_blank" rel="noopener noreferrer">https://jsfiddle.net/rollninja/ayngwd38/2/</a></p></blockquote><p>After the script registration the library will be available as a global variable <code>tableschema</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI html"><div tabindex="0" class="prism-code language-html codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&lt;!</span><span class="token doctype doctype-tag" style="color:#999988;font-style:italic">DOCTYPE</span><span class="token doctype" style="color:#999988;font-style:italic"> </span><span class="token doctype name" style="color:#999988;font-style:italic">html</span><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">lang</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">en</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">charset</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">utf-8</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">tableschema-js</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">//unpkg.com/tableschema/dist/tableschema.min.js</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript keyword" style="color:#00009f">const</span><span class="token script language-javascript"> </span><span class="token script language-javascript function-variable function" style="color:#d73a49">main</span><span class="token script language-javascript"> </span><span class="token script language-javascript operator" style="color:#393A34">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript keyword" style="color:#00009f">async</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript arrow operator" style="color:#393A34">=&gt;</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">        </span><span class="token script language-javascript keyword" style="color:#00009f">const</span><span class="token script language-javascript"> table </span><span class="token script language-javascript operator" style="color:#393A34">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript keyword control-flow" style="color:#00009f">await</span><span class="token script language-javascript"> tableschema</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript property-access maybe-class-name">Table</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">load</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">&#x27;https://raw.githubusercontent.com/frictionlessdata/datapackage-js/master/data/data.csv&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">        </span><span class="token script language-javascript keyword" style="color:#00009f">const</span><span class="token script language-javascript"> rows </span><span class="token script language-javascript operator" style="color:#393A34">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript keyword control-flow" style="color:#00009f">await</span><span class="token script language-javascript"> table</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">read</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">        </span><span class="token script language-javascript dom variable" style="color:#36acaa">document</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript property-access">body</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript property-access">innerHTML</span><span class="token script language-javascript"> </span><span class="token script language-javascript operator" style="color:#393A34">+=</span><span class="token script language-javascript"> </span><span class="token script language-javascript template-string template-punctuation string" style="color:#e3116c">`</span><span class="token script language-javascript template-string string" style="color:#e3116c">&lt;div&gt;</span><span class="token script language-javascript template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token script language-javascript template-string interpolation">table</span><span class="token script language-javascript template-string interpolation punctuation" style="color:#393A34">.</span><span class="token script language-javascript template-string interpolation">headers</span><span class="token script language-javascript template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token script language-javascript template-string string" style="color:#e3116c">&lt;/div&gt;</span><span class="token script language-javascript template-string template-punctuation string" style="color:#e3116c">`</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">        </span><span class="token script language-javascript keyword control-flow" style="color:#00009f">for</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript keyword" style="color:#00009f">const</span><span class="token script language-javascript"> row </span><span class="token script language-javascript keyword" style="color:#00009f">of</span><span class="token script language-javascript"> rows</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">          </span><span class="token script language-javascript dom variable" style="color:#36acaa">document</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript property-access">body</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript property-access">innerHTML</span><span class="token script language-javascript"> </span><span class="token script language-javascript operator" style="color:#393A34">+=</span><span class="token script language-javascript"> </span><span class="token script language-javascript template-string template-punctuation string" style="color:#e3116c">`</span><span class="token script language-javascript template-string string" style="color:#e3116c">&lt;div&gt;</span><span class="token script language-javascript template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token script language-javascript template-string interpolation">row</span><span class="token script language-javascript template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token script language-javascript template-string string" style="color:#e3116c">&lt;/div&gt;</span><span class="token script language-javascript template-string template-punctuation string" style="color:#e3116c">`</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">        </span><span class="token script language-javascript punctuation" style="color:#393A34">}</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript punctuation" style="color:#393A34">}</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript function" style="color:#d73a49">main</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="working-with-table"></a>Working with Table<a class="hash-link" href="#working-with-table" title="Direct link to heading">#</a></h3><p>A table is a core concept in a tabular data world. It represents data with metadata (Table Schema). Let&#x27;s see how we could use it in practice.</p><p>Consider we have some local csv file. It could be inline data or remote link - all supported by <code>Table</code> class (except local files for in-browser usage of course). But say it&#x27;s <code>data.csv</code> for now:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI csv"><div tabindex="0" class="prism-code language-csv codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">city,location</span></div><div class="token-line" style="color:#393A34"><span class="token plain">london,&quot;51.50,-0.11&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">paris,&quot;48.85,2.30&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">rome,N/A</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Let&#x27;s create and read a table. We use static <code>Table.load</code> method and <code>table.read</code> method with a <code>keyed</code> option to get array of keyed rows:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><div tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> table </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token maybe-class-name">Table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;data.csv&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">headers</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// [&#x27;city&#x27;, &#x27;location&#x27;]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">keyed</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// [</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//   {city: &#x27;london&#x27;, location: &#x27;51.50,-0.11&#x27;},</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//   {city: &#x27;paris&#x27;, location: &#x27;48.85,2.30&#x27;},</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//   {city: &#x27;rome&#x27;, location: &#x27;N/A&#x27;},</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>As we could see our locations are just strings. But it should be geopoints. Also Rome&#x27;s location is not available but it&#x27;s also just a <code>N/A</code> string instead of JavaScript <code>null</code>. First we have to infer Table Schema:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><div tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">infer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">descriptor</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// { fields:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//   [ { name: &#x27;city&#x27;, type: &#x27;string&#x27;, format: &#x27;default&#x27; },</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//     { name: &#x27;location&#x27;, type: &#x27;geopoint&#x27;, format: &#x27;default&#x27; } ],</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//  missingValues: [ &#x27;&#x27; ] }</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">keyed</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Fails with a data validation error</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Let&#x27;s fix not available location. There is a <code>missingValues</code> property in Table Schema specification. As a first try we set <code>missingValues</code> to <code>N/A</code> in <code>table.schema.descriptor</code>. Schema descriptor could be changed in-place but all changes should be committed by <code>table.schema.commit()</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><div tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">descriptor</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;missingValues&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;N/A&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">commit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">valid</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// false</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">errors</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Error: Descriptor validation error:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//   Invalid type: string (expected array)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//    at &quot;/missingValues&quot; in descriptor and</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//    at &quot;/properties/missingValues/type&quot; in profile</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>As a good citizens we&#x27;ve decided to check out schema descriptor validity. And it&#x27;s not valid! We should use an array for <code>missingValues</code> property. Also don&#x27;t forget to have an empty string as a missing value:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><div tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">descriptor</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;missingValues&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;N/A&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">commit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">valid</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// true</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>All good. It looks like we&#x27;re ready to read our data again:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><div tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">keyed</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// [</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//   {city: &#x27;london&#x27;, location: [51.50,-0.11]},</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//   {city: &#x27;paris&#x27;, location: [48.85,2.30]},</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//   {city: &#x27;rome&#x27;, location: null},</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Now we see that:</p><ul><li>locations are arrays with numeric latitude and longitude</li><li>Rome&#x27;s location is a native JavaScript <code>null</code></li></ul><p>And because there are no errors on data reading we could be sure that our data is valid against our schema. Let&#x27;s save it:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><div tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;schema.json&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;data.csv&#x27;</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Our <code>data.csv</code> looks the same because it has been stringified back to <code>csv</code> format. But now we have <code>schema.json</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI json"><div tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;fields&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;city&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;string&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;format&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;default&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;location&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;geopoint&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;format&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;default&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;missingValues&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;N/A&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>If we decide to improve it even more we could update the schema file and then open it again. But now providing a schema path and iterating thru the data using Node Streams:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><div tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> table </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token maybe-class-name">Table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;data.csv&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">schema</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;schema.json&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> stream </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">iter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">stream</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">stream</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;data&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">row</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// handle row [&#x27;london&#x27;, [51.50,-0.11]] etc</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// keyed/extended/cast supported in a stream mode too</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>It was only basic introduction to the <code>Table</code> class. To learn more let&#x27;s take a look on <code>Table</code> class API reference.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="working-with-schema"></a>Working with Schema<a class="hash-link" href="#working-with-schema" title="Direct link to heading">#</a></h3><p>A model of a schema with helpful methods for working with the schema and supported data. Schema instances can be initialized with a schema source as a url to a JSON file or a JSON object. The schema is initially validated (see <a href="#validate">validate</a> below). By default validation errors will be stored in <code>schema.errors</code> but in a strict mode it will be instantly raised.</p><p>Let&#x27;s create a blank schema. It&#x27;s not valid because <code>descriptor.fields</code> property is required by the <a href="http://specs.frictionlessdata.io/table-schema/" target="_blank" rel="noopener noreferrer">Table Schema</a> specification:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><div tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> schema </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token maybe-class-name">Schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">valid</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// false</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">errors</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Error: Descriptor validation error:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//         Missing required property: fields</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//         at &quot;&quot; in descriptor and</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//         at &quot;/required/0&quot; in profile</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>To not create a schema descriptor by hands we will use a <code>schema.infer</code> method to infer the descriptor from given data:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><div tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">infer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;age&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;name&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;39&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;Paul&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;2&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;23&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;Jimmy&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;3&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;36&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;Jane&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;4&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;28&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;Judy&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">valid</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// true</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">descriptor</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//{ fields:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//   [ { name: &#x27;id&#x27;, type: &#x27;integer&#x27;, format: &#x27;default&#x27; },</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//     { name: &#x27;age&#x27;, type: &#x27;integer&#x27;, format: &#x27;default&#x27; },</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//     { name: &#x27;name&#x27;, type: &#x27;string&#x27;, format: &#x27;default&#x27; } ],</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//  missingValues: [ &#x27;&#x27; ] }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Now we have an inferred schema and it&#x27;s valid. We could cast data row against our schema. We provide a string input by an output will be cast correspondingly:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><div tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">castRow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;5&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;66&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Sam&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// [ 5, 66, &#x27;Sam&#x27; ]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>But if we try provide some missing value to <code>age</code> field cast will fail because for now only one possible missing value is an empty string. Let&#x27;s update our schema:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><div tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">castRow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;6&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;N/A&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Walt&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Cast error</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">descriptor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">missingValues</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;N/A&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">commit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">castRow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;6&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;N/A&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Walt&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// [ 6, null, &#x27;Walt&#x27; ]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>We could save the schema to a local file. And we could continue the work in any time just loading it from the local file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><div tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;schema.json&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> schema </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token maybe-class-name">Schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;schema.json&#x27;</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>It was only basic introduction to the <code>Schema</code> class. To learn more let&#x27;s take a look on <code>Schema</code> class API reference.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="working-with-field"></a>Working with Field<a class="hash-link" href="#working-with-field" title="Direct link to heading">#</a></h3><p>Class represents a field in the schema.</p><p>Data values can be cast to native JavaScript types. Casting a value will check the value is of the expected type, is in the correct format, and complies with any constraints imposed by a schema.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><div tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;name&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;birthday&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;type&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;date&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;format&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;default&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;constraints&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;required&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;minimum&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;2015-05-30&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Following code will not raise the exception, despite the fact our date is less than minimum constraints in the field, because we do not check constraints of the field descriptor</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><div tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> dateType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> field</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">castValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;2014-05-29&#x27;</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>And following example will raise exception, because we set flag &#x27;skip constraints&#x27; to <code>false</code>, and our date is less than allowed by <code>minimum</code> constraints of the field. Exception will be raised as well in situation of trying to cast non-date format values, or empty values</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><div tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> dateType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> field</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">castValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;2014-05-29&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// uh oh, something went wrong</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Values that can&#x27;t be cast will raise an <code>Error</code> exception.
Casting a value that doesn&#x27;t meet the constraints will raise an <code>Error</code> exception.</p><p>Available types, formats and resultant value of the cast:</p><table><thead><tr><th>Type</th><th>Formats</th><th>Casting result</th></tr></thead><tbody><tr><td>any</td><td>default</td><td>Any</td></tr><tr><td>array</td><td>default</td><td>Array</td></tr><tr><td>boolean</td><td>default</td><td>Boolean</td></tr><tr><td>date</td><td>default, any, \&lt;PATTERN&gt;</td><td>Date</td></tr><tr><td>datetime</td><td>default, any, \&lt;PATTERN&gt;</td><td>Date</td></tr><tr><td>duration</td><td>default</td><td>moment.Duration</td></tr><tr><td>geojson</td><td>default, topojson</td><td>Object</td></tr><tr><td>geopoint</td><td>default, array, object</td><td>[Number, Number]</td></tr><tr><td>integer</td><td>default</td><td>Number</td></tr><tr><td>number</td><td>default</td><td>Number</td></tr><tr><td>object</td><td>default</td><td>Object</td></tr><tr><td>string</td><td>default, uri, email, binary</td><td>String</td></tr><tr><td>time</td><td>default, any, \&lt;PATTERN&gt;</td><td>Date</td></tr><tr><td>year</td><td>default</td><td>Number</td></tr><tr><td>yearmonth</td><td>default</td><td>[Number, Number]</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="working-with-validateinfer"></a>Working with validate/infer<a class="hash-link" href="#working-with-validateinfer" title="Direct link to heading">#</a></h3><blockquote><p><code>validate()</code> validates whether a <strong>schema</strong> is a validate Table Schema accordingly to the <a href="http://schemas.datapackages.org/json-table-schema.json" target="_blank" rel="noopener noreferrer">specifications</a>. It does <strong>not</strong> validate data against a schema.</p></blockquote><p>Given a schema descriptor <code>validate</code> returns <code>Promise</code> with a validation object:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><div tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">validate</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;tableschema&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">valid</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> errors</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">validate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;schema.json&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> error </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> errors</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// inspect Error objects</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Given data source and headers <code>infer</code> will return a Table Schema as a JSON object based on the data values.</p><p>Given the data file, example.csv:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI csv"><div tabindex="0" class="prism-code language-csv codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">id,age,name</span></div><div class="token-line" style="color:#393A34"><span class="token plain">1,39,Paul</span></div><div class="token-line" style="color:#393A34"><span class="token plain">2,23,Jimmy</span></div><div class="token-line" style="color:#393A34"><span class="token plain">3,36,Jane</span></div><div class="token-line" style="color:#393A34"><span class="token plain">4,28,Judy</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Call <code>infer</code> with headers and values from the datafile:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><div tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> descriptor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">infer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;data.csv&#x27;</span><span class="token punctuation" style="color:#393A34">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>The <code>descriptor</code> variable is now a JSON object:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><div tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  fields</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      description</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;integer&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      format</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;default&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;age&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      description</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;integer&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      format</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;default&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;name&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      description</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;string&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      format</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;default&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="api-reference"></a>API Reference<a class="hash-link" href="#api-reference" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="table"></a>Table<a class="hash-link" href="#table" title="Direct link to heading">#</a></h3><p>Table representation</p><ul><li><a href="#Table">Table</a><ul><li><em>instance</em><ul><li><a href="#Table+headers">.headers</a> â‡’ Array.&lt;string&gt;</li><li><a href="#Table+schema">.schema</a> â‡’ <code>Schema</code></li><li><a href="#Table+iter">.iter(keyed, extended, cast, forceCast, relations, stream)</a> â‡’ <code>AsyncIterator</code> | <code>Stream</code></li><li><a href="#Table+read">.read(limit)</a> â‡’ Array.&lt;Array&gt; | Array.&lt;Object&gt;</li><li><a href="#Table+infer">.infer(limit)</a> â‡’ <code>Object</code></li><li><a href="#Table+save">.save(target)</a> â‡’ <code>Boolean</code></li></ul></li><li><em>static</em><ul><li><a href="#Table.load">.load(source, schema, strict, headers, parserOptions)</a> â‡’ <a href="#Table"><code>Table</code></a></li></ul></li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="tableheaders--arraystring"></a>table.headers â‡’ Array.&lt;string&gt;<a class="hash-link" href="#tableheaders--arraystring" title="Direct link to heading">#</a></h4><p>Headers</p><p><strong>Returns</strong>: Array.&lt;string&gt; - data source headers</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="tableschema--schema"></a>table.schema â‡’ <code>Schema</code><a class="hash-link" href="#tableschema--schema" title="Direct link to heading">#</a></h4><p>Schema</p><p><strong>Returns</strong>: <code>Schema</code> - table schema instance</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="tableiterkeyed-extended-cast-forcecast-relations-stream--asynciterator--stream"></a>table.iter(keyed, extended, cast, forceCast, relations, stream) â‡’ <code>AsyncIterator</code> | <code>Stream</code><a class="hash-link" href="#tableiterkeyed-extended-cast-forcecast-relations-stream--asynciterator--stream" title="Direct link to heading">#</a></h4><p>Iterate through the table data</p><p>And emits rows cast based on table schema (async for loop).
With a <code>stream</code> flag instead of async iterator a Node stream will be returned.
Data casting can be disabled.</p><p><strong>Returns</strong>: <code>AsyncIterator</code> | <code>Stream</code> - async iterator/stream of rows:</p><ul><li><p><code>[value1, value2]</code> - base</p></li><li><p><code>{header1: value1, header2: value2}</code> - keyed</p></li><li><p><code>[rowNumber, [header1, header2], [value1, value2]]</code> - extended
<strong>Throws</strong>:</p></li><li><code>TableSchemaError</code> raises any error occurred in this process</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>keyed</td><td><code>boolean</code></td><td>iter keyed rows</td></tr><tr><td>extended</td><td><code>boolean</code></td><td>iter extended rows</td></tr><tr><td>cast</td><td><code>boolean</code></td><td>disable data casting if false</td></tr><tr><td>forceCast</td><td><code>boolean</code></td><td>instead of raising on the first row with cast error   return an error object to replace failed row. It will allow   to iterate over the whole data file even if it&#x27;s not compliant to the schema.   Example of output stream:     <code>[[&#x27;val1&#x27;, &#x27;val2&#x27;], TableSchemaError, [&#x27;val3&#x27;, &#x27;val4&#x27;], ...]</code></td></tr><tr><td>relations</td><td><code>Object</code></td><td>object of foreign key references in a form of   <code>{resource1: [{field1: value1, field2: value2}, ...], ...}</code>.   If provided foreign key fields will checked and resolved to its references</td></tr><tr><td>stream</td><td><code>boolean</code></td><td>return Node Readable Stream of table rows</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="tablereadlimit--arrayarray--arrayobject"></a>table.read(limit) â‡’ Array.&lt;Array&gt; | Array.&lt;Object&gt;<a class="hash-link" href="#tablereadlimit--arrayarray--arrayobject" title="Direct link to heading">#</a></h4><p>Read the table data into memory</p><blockquote><p>The API is the same as <code>table.iter</code> has except for:</p></blockquote><p><strong>Returns</strong>: Array.&lt;Array&gt; | Array.&lt;Object&gt; - list of rows:</p><ul><li><code>[value1, value2]</code> - base</li><li><code>{header1: value1, header2: value2}</code> - keyed</li><li><code>[rowNumber, [header1, header2], [value1, value2]]</code> - extended</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>limit</td><td><code>integer</code></td><td>limit of rows to read</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="tableinferlimit--object"></a>table.infer(limit) â‡’ <code>Object</code><a class="hash-link" href="#tableinferlimit--object" title="Direct link to heading">#</a></h4><p>Infer a schema for the table.</p><p>It will infer and set Table Schema to <code>table.schema</code> based on table data.</p><p><strong>Returns</strong>: <code>Object</code> - Table Schema descriptor</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>limit</td><td><code>number</code></td><td>limit rows sample size</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="tablesavetarget--boolean"></a>table.save(target) â‡’ <code>Boolean</code><a class="hash-link" href="#tablesavetarget--boolean" title="Direct link to heading">#</a></h4><p>Save data source to file locally in CSV format with <code>,</code> (comma) delimiter</p><p><strong>Returns</strong>: <code>Boolean</code> - true on success
<strong>Throws</strong>:</p><ul><li><code>TableSchemaError</code> an error if there is saving problem</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>target</td><td><code>string</code></td><td>path where to save a table data</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="tableloadsource-schema-strict-headers-parseroptions--codetablecode"></a>Table.load(source, schema, strict, headers, parserOptions) â‡’ <a href="#Table"><code>Table</code></a><a class="hash-link" href="#tableloadsource-schema-strict-headers-parseroptions--codetablecode" title="Direct link to heading">#</a></h4><p>Factory method to instantiate <code>Table</code> class.</p><p>This method is async and it should be used with await keyword or as a <code>Promise</code>.
If <code>references</code> argument is provided foreign keys will be checked
on any reading operation.</p><p><strong>Returns</strong>: <a href="#Table"><code>Table</code></a> - data table class instance
<strong>Throws</strong>:</p><ul><li><code>TableSchemaError</code> raises any error occurred in table creation process</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>source</td><td><code>string</code> | Array.&lt;Array&gt; | <code>Stream</code> | <code>function</code></td><td>data source (one of):   - local CSV file (path)   - remote CSV file (url)   - array of arrays representing the rows   - readable stream with CSV file contents   - function returning readable stream with CSV file contents</td></tr><tr><td>schema</td><td><code>string</code> | <code>Object</code></td><td>data schema   in all forms supported by <code>Schema</code> class</td></tr><tr><td>strict</td><td><code>boolean</code></td><td>strictness option to pass to <code>Schema</code> constructor</td></tr><tr><td>headers</td><td><code>number</code> | Array.&lt;string&gt;</td><td>data source headers (one of):   - row number containing headers (<code>source</code> should contain headers rows)   - array of headers (<code>source</code> should NOT contain headers rows)</td></tr><tr><td>parserOptions</td><td><code>Object</code></td><td>options to be used by CSV parser.   All options listed at <a href="https://csv.js.org/parse/options/" target="_blank" rel="noopener noreferrer">https://csv.js.org/parse/options/</a>.   By default <code>ltrim</code> is true according to the CSV Dialect spec.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="schema"></a>Schema<a class="hash-link" href="#schema" title="Direct link to heading">#</a></h3><p>Schema representation</p><ul><li><a href="#Schema">Schema</a><ul><li><em>instance</em><ul><li><a href="#Schema+valid">.valid</a> â‡’ <code>Boolean</code></li><li><a href="#Schema+errors">.errors</a> â‡’ Array.&lt;Error&gt;</li><li><a href="#Schema+descriptor">.descriptor</a> â‡’ <code>Object</code></li><li><a href="#Schema+primaryKey">.primaryKey</a> â‡’ Array.&lt;string&gt;</li><li><a href="#Schema+foreignKeys">.foreignKeys</a> â‡’ Array.&lt;Object&gt;</li><li><a href="#Schema+fields">.fields</a> â‡’ Array.&lt;Field&gt;</li><li><a href="#Schema+fieldNames">.fieldNames</a> â‡’ Array.&lt;string&gt;</li><li><a href="#Schema+getField">.getField(fieldName)</a> â‡’ <code>Field</code> | <code>null</code></li><li><a href="#Schema+addField">.addField(descriptor)</a> â‡’ <code>Field</code></li><li><a href="#Schema+removeField">.removeField(name)</a> â‡’ <code>Field</code> | <code>null</code></li><li><a href="#Schema+castRow">.castRow(row, failFalst)</a> â‡’ Array.&lt;Array&gt;</li><li><a href="#Schema+infer">.infer(rows, headers)</a> â‡’ <code>Object</code></li><li><a href="#Schema+commit">.commit(strict)</a> â‡’ <code>Boolean</code></li><li><a href="#Schema+save">.save(target)</a> â‡’ <code>boolean</code></li></ul></li><li><em>static</em><ul><li><a href="#Schema.load">.load(descriptor, strict)</a> â‡’ <a href="#Schema"><code>Schema</code></a></li></ul></li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemavalid--boolean"></a>schema.valid â‡’ <code>Boolean</code><a class="hash-link" href="#schemavalid--boolean" title="Direct link to heading">#</a></h4><p>Validation status</p><p>It always <code>true</code> in strict mode.</p><p><strong>Returns</strong>: <code>Boolean</code> - returns validation status</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemaerrors--arrayerror"></a>schema.errors â‡’ Array.&lt;Error&gt;<a class="hash-link" href="#schemaerrors--arrayerror" title="Direct link to heading">#</a></h4><p>Validation errors</p><p>It always empty in strict mode.</p><p><strong>Returns</strong>: Array.&lt;Error&gt; - returns validation errors</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemadescriptor--object"></a>schema.descriptor â‡’ <code>Object</code><a class="hash-link" href="#schemadescriptor--object" title="Direct link to heading">#</a></h4><p>Descriptor</p><p><strong>Returns</strong>: <code>Object</code> - schema descriptor</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemaprimarykey--arraystring"></a>schema.primaryKey â‡’ Array.&lt;string&gt;<a class="hash-link" href="#schemaprimarykey--arraystring" title="Direct link to heading">#</a></h4><p>Primary Key</p><p><strong>Returns</strong>: Array.&lt;string&gt; - schema primary key</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemaforeignkeys--arrayobject"></a>schema.foreignKeys â‡’ Array.&lt;Object&gt;<a class="hash-link" href="#schemaforeignkeys--arrayobject" title="Direct link to heading">#</a></h4><p>Foreign Keys</p><p><strong>Returns</strong>: Array.&lt;Object&gt; - schema foreign keys</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemafields--arrayfield"></a>schema.fields â‡’ Array.&lt;Field&gt;<a class="hash-link" href="#schemafields--arrayfield" title="Direct link to heading">#</a></h4><p>Fields</p><p><strong>Returns</strong>: Array.&lt;Field&gt; - schema fields</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemafieldnames--arraystring"></a>schema.fieldNames â‡’ Array.&lt;string&gt;<a class="hash-link" href="#schemafieldnames--arraystring" title="Direct link to heading">#</a></h4><p>Field names</p><p><strong>Returns</strong>: Array.&lt;string&gt; - schema field names</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemagetfieldfieldname--field--null"></a>schema.getField(fieldName) â‡’ <code>Field</code> | <code>null</code><a class="hash-link" href="#schemagetfieldfieldname--field--null" title="Direct link to heading">#</a></h4><p>Return a field</p><p><strong>Returns</strong>: <code>Field</code> | <code>null</code> - field instance if exists</p><table><thead><tr><th>Param</th><th>Type</th></tr></thead><tbody><tr><td>fieldName</td><td><code>string</code></td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemaaddfielddescriptor--field"></a>schema.addField(descriptor) â‡’ <code>Field</code><a class="hash-link" href="#schemaaddfielddescriptor--field" title="Direct link to heading">#</a></h4><p>Add a field</p><p><strong>Returns</strong>: <code>Field</code> - added field instance</p><table><thead><tr><th>Param</th><th>Type</th></tr></thead><tbody><tr><td>descriptor</td><td><code>Object</code></td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemaremovefieldname--field--null"></a>schema.removeField(name) â‡’ <code>Field</code> | <code>null</code><a class="hash-link" href="#schemaremovefieldname--field--null" title="Direct link to heading">#</a></h4><p>Remove a field</p><p><strong>Returns</strong>: <code>Field</code> | <code>null</code> - removed field instance if exists</p><table><thead><tr><th>Param</th><th>Type</th></tr></thead><tbody><tr><td>name</td><td><code>string</code></td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemacastrowrow-failfalst--arrayarray"></a>schema.castRow(row, failFalst) â‡’ Array.&lt;Array&gt;<a class="hash-link" href="#schemacastrowrow-failfalst--arrayarray" title="Direct link to heading">#</a></h4><p>Cast row based on field types and formats.</p><p><strong>Returns</strong>: Array.&lt;Array&gt; - cast data row</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>row</td><td>Array.&lt;Array&gt;</td><td>data row as an array of values</td></tr><tr><td>failFalst</td><td><code>boolean</code></td><td></td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemainferrows-headers--object"></a>schema.infer(rows, headers) â‡’ <code>Object</code><a class="hash-link" href="#schemainferrows-headers--object" title="Direct link to heading">#</a></h4><p>Infer and set <code>schema.descriptor</code> based on data sample.</p><p><strong>Returns</strong>: <code>Object</code> - Table Schema descriptor</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>rows</td><td>Array.&lt;Array&gt;</td><td>array of arrays representing rows</td></tr><tr><td>headers</td><td><code>integer</code> | Array.&lt;string&gt;</td><td>data sample headers (one of):   - row number containing headers (<code>rows</code> should contain headers rows)   - array of headers (<code>rows</code> should NOT contain headers rows)   - defaults to 1</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemacommitstrict--boolean"></a>schema.commit(strict) â‡’ <code>Boolean</code><a class="hash-link" href="#schemacommitstrict--boolean" title="Direct link to heading">#</a></h4><p>Update schema instance if there are in-place changes in the descriptor.</p><p><strong>Returns</strong>: <code>Boolean</code> - returns true on success and false if not modified
<strong>Throws</strong>:</p><ul><li><code>TableSchemaError</code> raises any error occurred in the process</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>strict</td><td><code>boolean</code></td><td>alter <code>strict</code> mode for further work</td></tr></tbody></table><p><strong>Example</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><div tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> descriptor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">fields</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;field&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;string&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> schema </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token maybe-class-name">Schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">descriptor</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getField</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;name&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// string</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">descriptor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">fields</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;number&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getField</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;name&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// string</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">commit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getField</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;name&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// number</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemasavetarget--boolean"></a>schema.save(target) â‡’ <code>boolean</code><a class="hash-link" href="#schemasavetarget--boolean" title="Direct link to heading">#</a></h4><p>Save schema descriptor to target destination.</p><p><strong>Returns</strong>: <code>boolean</code> - returns true on success
<strong>Throws</strong>:</p><ul><li><code>TableSchemaError</code> raises any error occurred in the process</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>target</td><td><code>string</code></td><td>path where to save a descriptor</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="schemaloaddescriptor-strict--codeschemacode"></a>Schema.load(descriptor, strict) â‡’ <a href="#Schema"><code>Schema</code></a><a class="hash-link" href="#schemaloaddescriptor-strict--codeschemacode" title="Direct link to heading">#</a></h4><p>Factory method to instantiate <code>Schema</code> class.</p><p>This method is async and it should be used with await keyword or as a <code>Promise</code>.</p><p><strong>Returns</strong>: <a href="#Schema"><code>Schema</code></a> - returns schema class instance
<strong>Throws</strong>:</p><ul><li><code>TableSchemaError</code> raises any error occurred in the process</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>descriptor</td><td><code>string</code> | <code>Object</code></td><td>schema descriptor:   - local path   - remote url   - object</td></tr><tr><td>strict</td><td><code>boolean</code></td><td>flag to alter validation behaviour:   - if false error will not be raised and all error will be collected in <code>schema.errors</code>   - if strict is true any validation error will be raised immediately</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="field"></a>Field<a class="hash-link" href="#field" title="Direct link to heading">#</a></h3><p>Field representation</p><ul><li><a href="#Field">Field</a><ul><li><a href="#new_Field_new">new Field(descriptor, missingValues)</a></li><li><a href="#Field+name">.name</a> â‡’ <code>string</code></li><li><a href="#Field+type">.type</a> â‡’ <code>string</code></li><li><a href="#Field+format">.format</a> â‡’ <code>string</code></li><li><a href="#Field+required">.required</a> â‡’ <code>boolean</code></li><li><a href="#Field+constraints">.constraints</a> â‡’ <code>Object</code></li><li><a href="#Field+descriptor">.descriptor</a> â‡’ <code>Object</code></li><li><a href="#Field+castValue">.castValue(value, constraints)</a> â‡’ <code>any</code></li><li><a href="#Field+testValue">.testValue(value, constraints)</a> â‡’ <code>boolean</code></li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="new-fielddescriptor-missingvalues"></a>new Field(descriptor, missingValues)<a class="hash-link" href="#new-fielddescriptor-missingvalues" title="Direct link to heading">#</a></h4><p>Constructor to instantiate <code>Field</code> class.</p><p><strong>Returns</strong>: <a href="#Field"><code>Field</code></a> - returns field class instance
<strong>Throws</strong>:</p><ul><li><code>TableSchemaError</code> raises any error occured in the process</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>descriptor</td><td><code>Object</code></td><td>schema field descriptor</td></tr><tr><td>missingValues</td><td>Array.&lt;string&gt;</td><td>an array with string representing missing values</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fieldname--string"></a>field.name â‡’ <code>string</code><a class="hash-link" href="#fieldname--string" title="Direct link to heading">#</a></h4><p>Field name</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fieldtype--string"></a>field.type â‡’ <code>string</code><a class="hash-link" href="#fieldtype--string" title="Direct link to heading">#</a></h4><p>Field type</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fieldformat--string"></a>field.format â‡’ <code>string</code><a class="hash-link" href="#fieldformat--string" title="Direct link to heading">#</a></h4><p>Field format</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fieldrequired--boolean"></a>field.required â‡’ <code>boolean</code><a class="hash-link" href="#fieldrequired--boolean" title="Direct link to heading">#</a></h4><p>Return true if field is required</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fieldconstraints--object"></a>field.constraints â‡’ <code>Object</code><a class="hash-link" href="#fieldconstraints--object" title="Direct link to heading">#</a></h4><p>Field constraints</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fielddescriptor--object"></a>field.descriptor â‡’ <code>Object</code><a class="hash-link" href="#fielddescriptor--object" title="Direct link to heading">#</a></h4><p>Field descriptor</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fieldcastvaluevalue-constraints--any"></a>field.castValue(value, constraints) â‡’ <code>any</code><a class="hash-link" href="#fieldcastvaluevalue-constraints--any" title="Direct link to heading">#</a></h4><p>Cast value</p><p><strong>Returns</strong>: <code>any</code> - cast value</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>value</td><td><code>any</code></td><td>value to cast</td></tr><tr><td>constraints</td><td><code>Object</code> | <code>false</code></td><td></td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="fieldtestvaluevalue-constraints--boolean"></a>field.testValue(value, constraints) â‡’ <code>boolean</code><a class="hash-link" href="#fieldtestvaluevalue-constraints--boolean" title="Direct link to heading">#</a></h4><p>Check if value can be cast</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>value</td><td><code>any</code></td><td>value to test</td></tr><tr><td>constraints</td><td><code>Object</code> | <code>false</code></td><td></td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="validatedescriptor--object"></a>validate(descriptor) â‡’ <code>Object</code><a class="hash-link" href="#validatedescriptor--object" title="Direct link to heading">#</a></h3><p>This function is async so it has to be used with <code>await</code> keyword or as a <code>Promise</code>.</p><p><strong>Returns</strong>: <code>Object</code> - returns <code>{valid, errors}</code> object</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>descriptor</td><td><code>string</code> | <code>Object</code></td><td>schema descriptor (one of):   - local path   - remote url   - object</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="infersource-headers-options--object"></a>infer(source, headers, options) â‡’ <code>Object</code><a class="hash-link" href="#infersource-headers-options--object" title="Direct link to heading">#</a></h3><p>This function is async so it has to be used with <code>await</code> keyword or as a <code>Promise</code>.</p><p><strong>Returns</strong>: <code>Object</code> - returns schema descriptor
<strong>Throws</strong>:</p><ul><li><code>TableSchemaError</code> raises any error occured in the process</li></ul><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>source</td><td><code>string</code> | Array.&lt;Array&gt; | <code>Stream</code> | <code>function</code></td><td>data source (one of):   - local CSV file (path)   - remote CSV file (url)   - array of arrays representing the rows   - readable stream with CSV file contents   - function returning readable stream with CSV file contents</td></tr><tr><td>headers</td><td>Array.&lt;string&gt;</td><td>array of headers</td></tr><tr><td>options</td><td><code>Object</code></td><td>any <code>Table.load</code> options</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="datapackageerror"></a>DataPackageError<a class="hash-link" href="#datapackageerror" title="Direct link to heading">#</a></h3><p>Base class for the all DataPackage/TableSchema errors.</p><p>If there are more than one error you could get an additional information
from the error object:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><div tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// some lib action</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// you have N cast errors (see error.errors)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">multiple</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> error </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> error</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">errors</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// cast error M is ...</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><ul><li><a href="#DataPackageError">DataPackageError</a><ul><li><a href="#new_DataPackageError_new">new DataPackageError(message, errors)</a></li><li><a href="#DataPackageError+multiple">.multiple</a> â‡’ <code>boolean</code></li><li><a href="#DataPackageError+errors">.errors</a> â‡’ Array.&lt;Error&gt;</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="new-datapackageerrormessage-errors"></a>new DataPackageError(message, errors)<a class="hash-link" href="#new-datapackageerrormessage-errors" title="Direct link to heading">#</a></h4><p>Create an error</p><table><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>message</td><td><code>string</code></td><td></td></tr><tr><td>errors</td><td>Array.&lt;Error&gt;</td><td>nested errors</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="datapackageerrormultiple--boolean"></a>dataPackageError.multiple â‡’ <code>boolean</code><a class="hash-link" href="#datapackageerrormultiple--boolean" title="Direct link to heading">#</a></h4><p>Whether it&#x27;s nested</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="datapackageerrorerrors--arrayerror"></a>dataPackageError.errors â‡’ Array.&lt;Error&gt;<a class="hash-link" href="#datapackageerrorerrors--arrayerror" title="Direct link to heading">#</a></h4><p>List of errors</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="tableschemaerror"></a>TableSchemaError<a class="hash-link" href="#tableschemaerror" title="Direct link to heading">#</a></h3><p>Base class for the all TableSchema errors.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="contributing"></a>Contributing<a class="hash-link" href="#contributing" title="Direct link to heading">#</a></h2><blockquote><p>The project follows the <a href="https://github.com/okfn/coding-standards" target="_blank" rel="noopener noreferrer">Open Knowledge International coding standards</a>. There are common commands to work with the project:</p></blockquote><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><div tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> run </span><span class="token builtin class-name">test</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> run build</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="changelog"></a>Changelog<a class="hash-link" href="#changelog" title="Direct link to heading">#</a></h2><p>Here described only breaking and the most important changes. The full changelog and documentation for all released versions could be found in nicely formatted <a href="https://github.com/frictionlessdata/tableschema-js/commits/master" target="_blank" rel="noopener noreferrer">commit history</a>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v112"></a>v1.12<a class="hash-link" href="#v112" title="Direct link to heading">#</a></h4><ul><li>Added support for infinite numbers: NaN, INF, -INF</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v111"></a>v1.11<a class="hash-link" href="#v111" title="Direct link to heading">#</a></h4><ul><li>Improved data/time validation using a conversion table and moment.js (#170)</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v110"></a>v1.10<a class="hash-link" href="#v110" title="Direct link to heading">#</a></h4><ul><li>Rebased on csv-parse@4</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v19"></a>v1.9<a class="hash-link" href="#v19" title="Direct link to heading">#</a></h4><p>Fix bug:</p><ul><li>URI format must have the scheme protocol to be valid (<a href="https://github.com/frictionlessdata/tableschema-js/issues/135" target="_blank" rel="noopener noreferrer">#135</a>)</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v18"></a>v1.8<a class="hash-link" href="#v18" title="Direct link to heading">#</a></h4><p>Improved behaviour:</p><ul><li>Automatically detect the CSV delimiter if one isn&#x27;t explicit set</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v17"></a>v1.7<a class="hash-link" href="#v17" title="Direct link to heading">#</a></h4><p>New API added:</p><ul><li>added <code>forceCast</code> flag to the the <code>table.iter/read</code> methods</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v16"></a>v1.6<a class="hash-link" href="#v16" title="Direct link to heading">#</a></h4><p>Improved behaviour:</p><ul><li>improved validation of <code>string</code> and <code>geojson</code> types</li><li>added heuristics to the <code>infer</code> function</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v15"></a>v1.5<a class="hash-link" href="#v15" title="Direct link to heading">#</a></h4><p>New API added:</p><ul><li>added <code>format</code> option to the <code>Table</code> constructor</li><li>added <code>encoding</code> option to the <code>Table</code> constructor</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v14"></a>v1.4<a class="hash-link" href="#v14" title="Direct link to heading">#</a></h4><p>Improved behaviour:</p><ul><li>Now the <code>infer</code> functions support formats inferring</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v13"></a>v1.3<a class="hash-link" href="#v13" title="Direct link to heading">#</a></h4><p>New API added:</p><ul><li><code>error.rowNumber</code> if available</li><li><code>error.columnNumber</code> if available</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v12"></a>v1.2<a class="hash-link" href="#v12" title="Direct link to heading">#</a></h4><p>New API added:</p><ul><li><code>Table.load</code> and <code>infer</code> now accept Node Stream as a <code>source</code> argument</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v11"></a>v1.1<a class="hash-link" href="#v11" title="Direct link to heading">#</a></h4><p>New API added:</p><ul><li><code>Table.load</code> and <code>infer</code> now accepts <code>parserOptions</code></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v10"></a>v1.0<a class="hash-link" href="#v10" title="Direct link to heading">#</a></h4><p>This version includes various big changes, including a move to asynchronous inference.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="v02"></a>v0.2<a class="hash-link" href="#v02" title="Direct link to heading">#</a></h4><p>First stable version of the library.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/frictionlessdata/libraries/edit/master/docs/docs/table-schema/javascript.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2022-01-26T07:00:39.000Z" class="lastUpdatedDate_nN9m">1/26/2022</time> by <strong>roll</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/table-schema/python"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« tableschema-py</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/table-schema/ruby"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">tableschema-rb Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#features" class="table-of-contents__link">Features</a></li><li><a href="#contents" class="table-of-contents__link">Contents</a></li><li><a href="#getting-started" class="table-of-contents__link">Getting started</a><ul><li><a href="#installation" class="table-of-contents__link">Installation</a></li></ul></li><li><a href="#documentation" class="table-of-contents__link">Documentation</a><ul><li><a href="#introduction" class="table-of-contents__link">Introduction</a></li><li><a href="#working-with-table" class="table-of-contents__link">Working with Table</a></li><li><a href="#working-with-schema" class="table-of-contents__link">Working with Schema</a></li><li><a href="#working-with-field" class="table-of-contents__link">Working with Field</a></li><li><a href="#working-with-validateinfer" class="table-of-contents__link">Working with validate/infer</a></li></ul></li><li><a href="#api-reference" class="table-of-contents__link">API Reference</a><ul><li><a href="#table" class="table-of-contents__link">Table</a></li><li><a href="#schema" class="table-of-contents__link">Schema</a></li><li><a href="#field" class="table-of-contents__link">Field</a></li><li><a href="#validatedescriptor--object" class="table-of-contents__link">validate(descriptor) â‡’ <code>Object</code></a></li><li><a href="#infersource-headers-options--object" class="table-of-contents__link">infer(source, headers, options) â‡’ <code>Object</code></a></li><li><a href="#datapackageerror" class="table-of-contents__link">DataPackageError</a></li><li><a href="#tableschemaerror" class="table-of-contents__link">TableSchemaError</a></li></ul></li><li><a href="#contributing" class="table-of-contents__link">Contributing</a></li><li><a href="#changelog" class="table-of-contents__link">Changelog</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/table-schema/python">Table Schema</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/data-package/python">Data Package</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/other-libraries/frictionless-ckan-mapper">Other Libraries</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://frictionlessdata.io/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/frictionlessdata/project/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum</a></li><li class="footer__item"><a href="https://discordapp.com/invite/Sewv6av" target="_blank" rel="noopener noreferrer" class="footer__link-item">Chat</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/frictionlessdata/frictionless-py" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/frictionlessd8a" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://okfn.org" target="_blank" rel="noopener noreferrer" class="footerLogoLink_SRtH"><img src="https://a.okfn.org/img/oki/landscape-white-468x122.png" alt="Open Knowledge Foundation" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="https://a.okfn.org/img/oki/landscape-white-468x122.png" alt="Open Knowledge Foundation" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></a></div><div class="footer__copyright">Copyright Â© 2022 Frictionless Data</div></div></div></footer></div>
<script src="/assets/js/styles.6424709d.js"></script>
<script src="/assets/js/runtime~main.55293567.js"></script>
<script src="/assets/js/main.738beddf.js"></script>
<script src="/assets/js/1.32cd4a63.js"></script>
<script src="/assets/js/2.e6f44230.js"></script>
<script src="/assets/js/36.f7f48e7f.js"></script>
<script src="/assets/js/935f2afb.48ba32ae.js"></script>
<script src="/assets/js/17896441.bcb4da12.js"></script>
<script src="/assets/js/66d8e426.4e56d055.js"></script>
</body>
</html>